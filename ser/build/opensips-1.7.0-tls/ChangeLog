
2011-08-26 17:14:15  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8338] :

	Updated ChangeLog


2011-08-26 16:42:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8337] :

	- 1.7 is no longer beta, but stable


2011-08-26 13:36:18  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8336] :

	Backported from trunk (#8335):
	Fixed perl syntax in osipsconsole when OpenSIPS tables are created


2011-08-26 12:48:20  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8333] :

	backport from trunk (rev #8330):
	-fixed reason phrase in cancel (as per rfc 3326) : add reason for CANCELs generated by opensips at timeout and for cancels received from caller
	 Reported by Pete Kelly



2011-08-26 12:44:15  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8332] :

	Backported from trunk (#8331):
	fixed failed transactions accounting when cdr_flag is used


2011-08-26 11:44:42  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8328] :

	Backport from trunk r8327:

	Added missing flag definition to parser



2011-08-25 20:02:30  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8326] :

	backport from trunk ( #8325 )

	allow traced_user_avp to have an integer value 



2011-08-25 19:47:30  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8324] :

	Updated nat_traversal module documentation



2011-08-25 19:25:26  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8322] :

	Backport from trunk r8321:

	Fixed dialog creation in the call_control module after latest changes in the dialog API
	    - Dialog will be created late, if t_relay is called without creating
	      a dialog first and the call has a limit imposed by CallControl

	Also fixed some spacing



2011-08-25 19:21:30  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8320] :

	Backport from trunk r8319:

	Fixed dialog creation in mediaproxy module after latest changes in dialog API
	    - Dialog will be created late, if t_relay is called without creating
	      a dialog first



2011-08-25 19:16:51  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8318] :

	Backport from trunk r8317:

	Fixed dialog creation in nat_traversal after API changes in dialog module
	   - Dialog will be created late, if t_relay is called without creating
	     a dialog first
	   - Added $nat_traversal.track_dialog pv in order to have the ability
	     to prevent the nat_traversal module from creating a dialog



2011-08-25 18:38:38  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8316] :

	Backported from trunk (#8315):
	Fixed warning on BSD systems


2011-08-25 14:29:55  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8313] :

	backport from trunk ( rev #8295 )

	In case of connection loss, the db_postgres module will attempt to reconnect on the spot, instead of waiting for the next query



2011-08-25 12:43:22  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8312] :

	Backported from trunk (#8311):
	Changed ERROR with DBG when flags were not saved for the initial INVITE


2011-08-24 22:57:33  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8310] :

	Backport from trunk r8309

	Removed uneeded Debian dependency



2011-08-24 16:22:50  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8307] :

	backport from trunk (rev #8306)

	fixed free(0) called when no more pkg mem



2011-08-24 13:05:38  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8304] :

	backport from trunk ( rev #8303 )

	fixed wrong NOT NULL constraint for created field which would cause failed queries in postgres



2011-08-24 12:25:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8301] :

	backport from trunk (rev #8299-8300):
	- allow append_to_reply() func in FAILURE ROUTE
	- docs update


2011-08-23 19:13:24  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8298] :

	Backported from trunk (#8294):
Enclose the escape ('\') char when profiles are inserted into database



2011-08-23 19:02:57  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8297] :

	Backport from trunk r8296

	Added presence_callinfo to presence modules Debian package



2011-08-23 17:53:47  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8292] :

	backport from trunk ( rev #8291 )
	- fixed memory corruption when flushing dialog vars to database
	  Shared credits to Bogdan Iancu on debugging this.



2011-08-23 17:14:10  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8290] :

	Backported from trunk (#8289):
	* Execute scripts with /bin/bash in case it exists on the system.
	Problem reported by Saul Ibarra Corretge


2011-08-23 14:33:29  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8288] :

	Backported from trunk (rev 8287):
	Replaced bash-style (==) with dash-style (=) string comparation in shell scripts


2011-08-23 14:24:28  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8286] :

	Backported from trunk (rev 8285):
	* Removed some unnecessary dependencies for debian packaging
	* Updated the Debian standard to 3.9.1
	Credits go to Saul Ibarra Corretge


2011-08-23 13:11:16  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8283] :

	backport from trunk ( rev #8282 )

	fixed proper free in case of no more shm



2011-08-22 19:42:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8281] :

	backport from trunk (rev #8280):
	-fixed 2 bugs in topo hiding
	  1) mangle the contact in sequential requests too
	    2) force parsing of all hdrs before trying to remove the RR header (what is not found, cannot be deleted ;) )



2011-08-22 19:36:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8278] :

	port from 1.6 (rev #8277)
	- fixed memory corruption when flushing dialog profiles to database
	  Shared credits to Vlad Paiu on debugging this.



2011-08-22 14:13:39  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8275] :

	backport from trunk (rev #8274)
	- if db_mode is 0 (no db), do not ask for the db_url param to be set.


2011-08-22 14:07:28  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8273] :

	backport from trunk (rev #8242)

	allow compact header names on From & To hdr mangling



2011-08-22 13:38:10  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8272] :

	Backported from trunk (rev 8212):
	deleted the escape for '#' and '|' when the dlg vals are fetched from database


2011-08-22 13:05:40  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8271] :

	backport from trunk (rev #8263)

	set default domain to '' to avoid unique key violations ( Mysql issue )



2011-08-22 09:55:49  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8269] :

	backport from trunk (rev #8268)
	- fixed the setting of default db url
	  Credits go to Saul Ibarra
	  Closes bug report 3395639



2011-08-19 19:34:21  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8265] :

	- backport from trunk (rev #8264)
	- fixed compiling when STATISTICS are not defined
	  reported by Ovidiu Sas



2011-08-19 13:39:28  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8259] :

	Backported from trunk (rev 8258):
	- fixed the uac_replace_to/from functions:
	The real from/to URIs are stored in plain text in dialog variables


2011-08-12 13:33:08  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8257] :

	backport from trunk (8181)
		
	fixed module name



2011-08-12 13:14:38  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8252] :

	backport from trunk ( 8203 - 8215 )

	fixed several problems with the TO header parsing



2011-08-12 13:01:02  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8251] :

	backport from trunk (8223)

	fixed ugly bug in match_dialog() function



2011-08-12 12:56:34  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8250] :

	backport from trunk (8222)

	use global advertised address when building Record-Route headers



2011-08-12 12:55:09  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8249] :

	backport from trunk (8221)

	do not display bogus $DLG_lifetime if dlg not confirmed



2011-08-12 12:53:42  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8248] :

	backport from trunk ( 8202 )

	- first update timeout and then insert to DB
	- if timeout is not set yet, do not display bogus value in dlg_list



2011-08-12 12:51:14  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8247] :

	backport from trunk (8183)

	fixed sh syntax



2011-08-12 12:49:45  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8246] :

	backport from trunk (8180)

	if create_dialog() finds dialog already created, set dlg flags for pinging & timeout, if provided



2011-08-12 12:47:38  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8245] :

	backport from trunk (8177)

	extra dbg info for failed db selects 



2011-08-10 22:31:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8240] :

	backport from trunk ( rev #8239):
	  - fixed dialog matching based on SIP elements - if the request has no TO-tag, match it only against dialogs with no To-tag.




2011-08-10 21:27:26  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8237] :

	backport from trunk (rev #8236):
	- fixed name of DB column in ERROR log
	  Credits go to Kiss Karoly



2011-08-10 21:16:20  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8234] :

	backport from trunk (rev #8233):
	- fixedc bug in properly ordering the contacts based on Q value
	  Reported by Duane Larson



2011-08-10 11:21:28  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8230] :

	Backport from trunk r8228

	Added return code for duplicated callid error in CallControl



2011-08-10 11:20:17  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [8229] :

	Removed obsolete comment



2011-08-09 19:50:47  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8225] :

	backport from trunk (rev #8224):
	- when pushing serialized data into RURI, also push the additional info like destination URI, socket, flags, path vector.
	  Reported by Duane Larson.



2011-08-05 22:33:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8219] :

	backport from trunk (rev #8217):
	- fixed mem leak in DNS resolve for GWs
	  Closes bug report 3377861.
	    Thanks to Dave May for debugging info.



2011-07-28 13:09:01  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8201] :

	Backported from trunk (#8199):
	properly handle unsuccessful branches from failure route



2011-07-25 16:46:44  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8198] :

	Backported from trunk (#8197):
	skip replacing URIs for FAKED_REPLYs


2011-07-25 15:30:26  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8196] :

	Backported from trunk(#8187):
	fixed ldap_result attribute matching



2011-07-20 11:11:59  Di-Shi Sun <di-shi at transnexus dot com> 
	* [8194] :

	1. Merged changes from branch 1.6.
	2. Fixed issues for AVP.

2011-07-19 13:46:20  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8192] :

	Backported from trunk (#8191)
	Renamed some members in order to compile properly on Solaris



2011-07-18 14:11:03  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8190] :

	Fixed sdp.line transformation


2011-07-15 12:55:45  Anca Vamanu, <anca at oepnsips dot org> 
	* [8186] :

	- fixed inserting xmlns attribute twice (reported by Steven Lam)


2011-07-13 17:57:03  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8178] :

	Added new packaging specs for debian-lenny distribution


2011-07-13 11:53:17  Marc Leurent <lftsy at leurent dot eu> 
	* [8174] :

	Marc Leurent <marc.leurent@vtx-telecom.ch>
	* Debian Packaging: Add missing libjson0-dev Build-Depends
	* CentOS Packaging: Add missing files and remove old files into packaging



2011-07-12 20:42:32  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8173] :

	Updated news


2011-07-12 20:37:22  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8172] :

	- some version related updates


2011-07-12 20:22:22  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8171] :

	Updated authors list


2011-07-12 20:18:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8169] :

	- doc updated


2011-07-12 20:16:02  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8167] :

	Updated modules list


2011-07-12 19:32:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8164] :

	Creating new branch for major release 1.7.0

2011-07-12 19:29:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8163] :

	- memcached and json modules added a individual deb packages


2011-07-12 19:10:22  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8162] :

	- version, compile flags, switched prepared for release


2011-07-12 19:05:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8161] :

	update changelog



2011-07-12 18:54:30  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8160] :

	- docs and examples updated


2011-07-12 18:48:55  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8159] :

	removed enable_full_lr from code



2011-07-12 18:44:01  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8158] :

	updated migration script



2011-07-12 18:12:16  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8157] :

	-removed debian etch packaging


2011-07-12 18:06:54  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8156] :

	- fixed more warnings


2011-07-12 17:25:06  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8155] :

	Updated specs to OpenSIP 1.7


2011-07-12 17:12:49  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8154] :

	more fixing on compile warnings


2011-07-12 17:11:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8153] :

	- fixed compiled warnings


2011-07-12 11:09:53  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8152] :

	* Proper (according to LSB) return values
	* Explicitly set up PID_file and lock-file
	* Check for running OpenSIPs before some operations

	-- applied Peter Lemenkov's patch


2011-07-11 13:39:14  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8150] :

	fix memory leak via radius library (some radius AVP are to released).
	Thansks and credits for hunting this done go to Errol Samuels


2011-07-10 21:11:05  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8149] :

	- added the LOCAL route test too


2011-07-10 21:08:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8148] :

	- fixed bug in managing the lumps for the codec related changes (in request, failure and branch route)
	  Closes bug 3347257


2011-07-10 18:47:47  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8147] :

	new functions to create SKIP lumps (part of bug fix 3347257)


2011-07-10 18:31:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8146] :

	removed the script callbacks, not to be used by codec ops after the bug fixing


2011-07-10 18:20:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8145] :

	- new type of lump (LUMP_SKIP) added to bypass changes done at same position - requred for the codec bug fixing


2011-07-08 17:11:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8144] :

	- fixed triggering the msg callbacks - doing after the destination is resolved, to avoid double DNS lookup. Also, do it per branch (as branches may have different destinations)
	  Closes bug 3347251


2011-07-08 16:30:50  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8143] :

	enhanced "engage_rtp_proxy" function:
	 - added support for late negociation scenario
	 - specify separate flags for each branch


2011-07-08 16:07:44  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8142] :

	fixed bogus double calling of dialog callbacks



2011-07-08 15:17:13  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8141] :

	removed report_ack parameter



2011-07-08 11:42:09  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8140] :

	fixed error checking for mangled to & from



2011-07-07 15:36:37  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8139] :

	fixed documentation



2011-07-07 15:03:14  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8138] :

	b2b_logic: README file regenerated



2011-07-07 15:02:20  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8137] :

	b2b_logic: fix b2bl_from_spec_param docs



2011-07-07 14:08:54  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8136] :

	updated migration script



2011-07-07 11:35:56  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8135] :

	fixed wrong callback numbering



2011-07-06 17:29:37  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8134] :

	added a new pseudo-variable called "ru_q"
	used to access the Q value for R-URI
	fixes bug #3349030


2011-07-06 10:56:24  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8133] :

	fixed DB flushing in usrloc timer



2011-07-05 18:44:53  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8132] :

	fixed bogus ERROR messages in case of queries that do not return a result



2011-07-05 17:48:27  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8131] :

	fixed copy-paste bug 



2011-07-04 18:58:33  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8130] :

- properly restore mangled from & to uri from DB in case of uac_replace_*
	- restore flags before inserting into expired & ping timers



2011-07-04 12:37:59  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8129] :

	fixed dialog db schema



2011-07-04 12:09:35  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8128] :

	fixed dialog timer inserts



2011-07-04 06:18:05  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8127] :

	b2b_logic: set pointer to dlginfo to NULL after a shm_free call



2011-07-03 03:59:14  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8126] :

	b2b_logic: handle REFER for b2b calls (bug 3338085)



2011-07-02 14:43:39  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8125] :

	load_balancer: fixed wrong avp parsing


2011-07-01 22:02:33  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8124] :

	b2b_logic: "Subscription-state" and "Event" headers are now part of the list
	           of default headers that are passed between entities involved in a call
	 - fix required for  bug 3338085 (REFER handling in b2b)



2011-07-01 19:35:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8123] :

	- docs update - report_ack old param added to FAQ


2011-07-01 19:25:44  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8122] :

	- docs updated - "enable_full_lr" param was removed


2011-07-01 18:39:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8120] :

	- fixed updating flags in transaction, between FAILURE callbacks and FAILURE route. This was leading to double bogus recording of missed call events.


2011-07-01 17:47:44  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8119] :

	fixed bug in  ACC for missed_calls 



2011-07-01 17:25:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8117] :

	- fixed ugly bug in increasing the size of the buffere for retrieving the contacts that need to be pinged. This was leading to missing the pinging for some contacts.
	  Credits for troubleshooting and fixing this go to James Lamanna


2011-07-01 17:16:49  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8116] :

	fixed real-time update functionality



2011-07-01 16:09:49  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8115] :

	- bug fixed: sip_uri cloner has to translate the pointers for the unknown URI params


2011-07-01 00:19:05  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8114] :

	b2b_entities: removing dead code related to bug 3338085 (REFER handling in b2b)



2011-06-30 23:47:33  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8113] :

	b2b_entities: api enhancement: get_b2bl_key
	 - retrieves a b2b logic key for a given (callid,to_tag,from_tag)

	Note: api enhancement required for bug fix 3338085 (REFER handling in b2b)



2011-06-30 21:52:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8112] :

	- fixed some defines 


2011-06-30 21:37:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8111] :

	- removed the E2EACK callbacks


2011-06-30 21:30:12  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8110] :

	E2EACK TM callback removed


2011-06-30 21:16:54  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8109] :

	- timer API updated (related to #8106)


2011-06-30 21:10:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8108] :

	- added a UNIQUE constraint to the INDEX on username,domain,contact


2011-06-30 20:40:22  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8107] :

	- TM may create its own timer process 
	"Under heavy load, the presence cleanup routes and the register cleanup routines can take several minutes each. During this time, the tm timers, and in particular the retransmission timers don't run. Given that the first retransmisssion timer is 0.5sec, even very small delays caused by the cleanup routines can kill the retransmissions. This patch "fixes" this by allowing a dedicated timer process for tm."

	Based on patch #3028765, contributed by Kennard White, heavly modified.


2011-06-30 20:26:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8106] :

	- new functions to all module to put more rutines to a single custom timer process (timer created by module)


2011-06-30 19:25:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8105] :

	- fixed race between UPDATE and DELETE when using DB_ONLY mode (one processe can update a record, while timer proc tries to delete it). The result is loosing contacts from database. The fix is to use REPLACE (if available on DB level) instead of UPDATE (as records may be missing).
	  Based on an original idea from patch #2969454; Credits go to Stanislaw Pitucha 

	- fixed bug in MI interface when using wrong callid and cseq for searching contacts via MI commands.


2011-06-30 18:49:48  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8104] :

	b2b_entities: README file regenareted



2011-06-30 18:48:57  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8103] :

	b2b_entities: doc updates



2011-06-30 18:23:47  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8102] :

	uac_auth: README file regenerated with proper $Date$ and $Revision$



2011-06-30 18:22:35  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8101] :

	uac_auth: set svn:keywords



2011-06-30 18:20:31  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8100] :

	uac_auth: set svn:keywords



2011-06-30 18:09:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8099] :

	uac_auth: documentation



2011-06-30 17:23:37  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8098] :

	uac_registrant: documentation updates



2011-06-30 17:17:36  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8097] :

	registrant module deleted



2011-06-30 17:15:48  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8096] :

	registrant module renamed to uac_registrant



2011-06-30 17:14:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8095] :

	- fixed compile error on trim function re-definition


2011-06-30 17:01:51  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8094] :

	- fixed compile erros (trim function redefinition) 
	  (introduced with previous commit)


2011-06-30 16:30:26  Anca Vamanu, <anca at opensips dot org> 
	* [8093] :

	- new feature: Topology hiding based on dialog module


2011-06-30 14:40:58  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8092] :

	extra CRIT logging in attempt to capture a bogus case



2011-06-30 12:48:28  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8091] :

	Added a new function 'ts_usec_delta' that returns the difference
	between two timestamps.


2011-06-30 11:07:13  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8090] :

	improved rtpproxy distribution in case of disabled rtpproxies
	applied patch #2887937 - credits go to Christophe Sollet


2011-06-29 19:08:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8089] :

	b2b_entities: identify the tuple of the call that needs to be replaced in a call transfer scenario



2011-06-29 18:36:34  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8088] :

	b2b_logic: for outgoing INVITE, create To URI as a URI and not as a name-addr (no LAQUOT and RAQUOT)



2011-06-29 17:16:12  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8087] :

	parser: silence a DBG probe



2011-06-29 12:45:17  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8086] :

	duplicate event names checking


2011-06-29 12:37:54  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8084] :

	- make fifo more flexible in handling syntax errors in MI commands


2011-06-29 12:15:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8082] :

	- bug fixed in evaluation of 'not equal' tests against domain names (like src_ip!=domain.name.com).
	  Credits go to "mitch" on IRC.


2011-06-29 11:57:39  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8081] :

	fixed proper status code returning in case of timers that need initializing



2011-06-29 03:51:29  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8080] :

	b2b_entities: adding a DBG probe about the call to be replaced in a REFER



2011-06-29 03:49:46  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8079] :

	parse_replaces: spelling fixes



2011-06-29 03:20:12  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8078] :

	parser: support for parsing "Replaces" header body



2011-06-28 19:39:28  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8077] :

	parse_uri: new helper function for splitting URI headers



2011-06-28 18:57:56  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8076] :

fixed bug where, in case of uac_replace_* function usage, in-dialog requests generated by OpenSIPS from the middle would have wrong FROM and/or TO uris



2011-06-28 18:37:10  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8075] :

	added extra exported function to TM API, that allows retrieving current branch index



2011-06-28 16:08:53  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8074] :

	uac: doc updates (credential parameter deleted - moved to uac_auth module)



2011-06-28 12:06:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8072] :

	- fixed bogus rtpproxy disabling - copy'n'paste error


2011-06-28 10:53:50  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8071] :

	- fixed race condition - on timeout, first CANCEL first the branch and only then generate a new branch (serial forking on timeout). Previous approach (first generate new branch and then CANCEL previous branhc) was leading to unpredictive SIP behaviours, especially when the target of both branches is same SIP entity.
	  Closes patch #2940556
	  Reported by Andrew Pogrebennyk


2011-06-28 10:25:25  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8069] :

	- fixed bug in adding the "nortpproxy" string - the lump (change) should not be anchored within a SDP line (which may be removed), but between lines - SDP lines should not be fragmented by changes as it may lead to unpredictable results.
	  Closes bug #3150707


2011-06-28 05:32:15  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8068] :

	b2b_entities: relax dependency on uac_auth api
	 - if uac_auth module is not loaded, diasble authentication functionality (pass back the challenge to the caller)



2011-06-28 03:57:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8067] :

	b2b_entities: if no credentials found, just pass the authentication challenge back to caller



2011-06-28 01:49:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8066] :

	b2b_entities: suport for authentication
	 - the list of credentials is provided by the uac_auth module which must be loaded before 
	b2b_entities module



2011-06-28 00:40:59  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8065] :

	uac: "credential" module parameter removed
	 - uac will use the credentials exported by the uac_auth module



2011-06-28 00:39:31  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8064] :

	uac_auth: adding "credential" module param
	 - a list of credentials is built and made available to modules using the uac_auth api



2011-06-27 23:26:05  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8063] :

	uac_auth: adding a missing include



2011-06-27 23:03:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8062] :

	b2b_entities: removing noisy debug probe



2011-06-27 22:46:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8061] :

	uac_auth: set svn:ignore propedit



2011-06-27 22:42:30  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8060] :

	uac: integrate uac with the new uac_auth module



2011-06-27 22:28:58  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8059] :

	registrant: documentation updated to reflect the new dependency on the uac_auth module



2011-06-27 22:22:54  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8058] :

	registrant: integrate registrant module with the new uac_auth module



2011-06-27 22:20:16  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8057] :

	uac_auth: new module - provides a common api for uac authentication functionality



2011-06-27 20:29:43  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8056] :

	tm: saving pointers to the body and the extra headers of a request sent out from a dlg structure
	 - when a request is sent out, we save the pointers to the body and extra headers
	 - this is usefull if we need to re-send the same request in a different transaction (i.e. when we need to perform authetication on an outgoing INVITE)



2011-06-27 19:36:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8054] :

	-if the HOST part of RURI is changed, automatically drop the maddr param if present
	 Closes buf report 2914149



2011-06-27 18:59:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8052] :

	- when contact IP is fixed (replaced), remove any existing maddr parameter.
	  Fix provided by Walter Doekes
	  Closes bug report 3312423


2011-06-27 14:46:13  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8050] :

	Proper handling for multiple RTPProxy nofitication commands


2011-06-24 23:19:16  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8049] :

	presence: remove some DBG probes and fix a NULL pointer crash when running in debug mode



2011-06-24 18:35:46  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8048] :

	added core function that returns the current timestamp, both the seconds and the microseconds, from a single system call



2011-06-24 17:55:52  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8046] :

	fix_contact does not escape properly an IPv6 address. This patch adds support for this.

	(This patch is needed for example to support a broken client that sends its private IPv4 address as contact, even though a valid global IPv6 address could be provided -- qutecom in my test scenario.)

	The fix is simply to detect IPv6 and use brackets around the IP address.


	Patch #3167286, contributed by shimaore


2011-06-24 17:52:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8045] :

	In order to better support further developement of SIP-T handling for OpenSIPS (e.g. by new modules), I added the mime subtype "application/ISUP" in parse_content.h and parse_content.c.
	Patched #3324748 contributed by Roger Schreiter.


2011-06-24 17:28:53  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8044] :

	fixed bug at shutdown, in case shutdown was triggered by error in cfg



2011-06-24 17:28:12  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8043] :

	OpenSIPS now returns proper return code to the init script



2011-06-24 14:01:22  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8042] :

	- added the possibility to instruct opensips not to open a new TCP connection when trying to deliver a requests (but only to use an existing one).
	  New core param "tcp_no_tcp_conn_bflag" - index of branch flag to mark the branch that should not attempt to open a new TCP conn.


2011-06-24 13:54:52  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8041] :

	fixed some error codes


2011-06-24 11:54:06  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8040] :

	- fixed compile warning


2011-06-23 12:56:49  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8039] :

	added socket freeing function to the transport modules interface in EVI


2011-06-23 12:49:27  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8038] :

	fixed async commands list handling


2011-06-22 15:49:07  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8037] :

	Removed "i:" and "s:" from AVPs name - these name format should't be used anymore.
	From script, all AVPs will be seen as strings from now on.
	From coding point of view, all AVP namse will be mapped to an unique integer id at fixup.
	The AVP interface was changed to support only integer AVP names.



2011-06-22 13:51:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8036] :

	new script variables added:
		auth.nonce
		auth.opaque
		auth.alg
		auth.qop
		auth.nc

	Credits go to Brett Nemeroff


2011-06-22 13:50:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8035] :

	- enabled by default NICER, to get few output during compiling
	- enabled (for testing phase) the memory debugger
	- set correct version for next release


2011-06-22 13:48:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8034] :

	- fixed compile warning


2011-06-22 13:01:41  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8033] :

	proper handling of insert buffering for multiple domains



2011-06-22 12:35:49  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8032] :

	do proper insert list buffering for accounted calls and missed calls



2011-06-21 19:33:03  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8031] :

	only do insert buffering if the binded module explicitly says it supports this feature



2011-06-21 18:31:40  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8030] :

	Insert buffering introduced to OpenSIPS DB core
	Instead of flushing inserts row by row to DB, wait for query_buffer_size rows to pile up, and only then flush to DB
	Also, a timer will run every query_flush_time seconds, ensuring that no rows will remain in memory for a long time

	Integrated this feature with acc, siptrace and avpops, and also with the usrloc and dialog timer that do write-back synchronization with the DB


2011-06-21 14:10:44  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8027] :

	-moved extract_hdrs() from TM module to core (as extract_ftc_hdrs() )
	 This is needed for a future fix related to proper FROM/TO changing in dialog module


2011-06-21 13:44:13  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8026] :

	- new "match_dialog()" script function for explicitly doing dialog matching or for coping with sequential requests with no Route hdr.


2011-06-21 13:40:15  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8024] :

	applied patch #3062926
	credits go to Kennard White


2011-06-21 12:47:48  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8022] :

	fixed encode_contact function documentation
	Credits go to Stanislaw Pitucha


2011-06-21 12:40:20  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8021] :

	-force using the abyss server code from opensips (imported in opensips module) instead of the code from library - the lib has a bug, a deadlock in the SIGCHLD signal handler.


2011-06-21 12:16:04  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [8019] :

	- the dialog state machine reports the faults as INFO, not CRITICAL
	- improve some safety checks


2011-06-20 16:49:48  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8017] :

	- fixed dangling pointers
	- stop pinging if dialog in state 5


2011-06-20 11:14:16  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8016] :

	also end dialog on explicit 408 



2011-06-17 12:41:27  Anca Vamanu, <anca at opensips dot org> 
	* [8015] :

	- fix: made WRITE_THROUGH db mode more accurate - update also when sending requests/replies out (reported by Ovidiu Sas in bug #3317402)


2011-06-16 14:11:12  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8014] :

	updated the documentation to reflect the latest dialog modules changes



2011-06-16 14:06:19  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8013] :

	updated the documentation to reflect the latest dialog modules changes


2011-06-16 13:26:58  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8012] :

	ported to use the create_dlg() function in the dialog API, rather than rely on the deprecated dlg_flag 



2011-06-16 13:21:02  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8011] :

	ported to use the create_dlg() function in the dialog API, rather than rely on the deprecated dlg_flag 



2011-06-16 13:15:06  Vlad Paiu <vladpaiu at opensips dot org> 
	* [8010] :

	ported to use the create_dlg() function in the dialog API, rather than rely on the deprecated dlg_flag 


2011-06-16 10:31:55  Anca Vamanu, <anca at opensips dot org> 
	* [8009] :

	- fixed deleting b2b_entities records from db at shutdown (reported by Ovidiu Sas, closes bug #3317110)


2011-06-15 16:40:54  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8007] :

	fixed last commit


2011-06-15 16:35:17  Razvan Crainea <razvancrainea at opensips dot org> 
	* [8006] :

	fixed column size verification at reload


2011-06-15 01:29:36  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [8005] :

	b2b_entities: fix "db_mode" parameter example



2011-06-14 14:26:14  Anca Vamanu, <anca at opensips dot org> 
	* [8003] :

	- fix: shortcuts in transaction were broken when lumps were applied in local_route


2011-06-07 16:12:30  Anca Vamanu, <anca at opensips dot org> 
	* [8002] :

	- fix: included also ALLOW header in the list of headers for which memory is allocated at parsing


2011-06-06 12:34:17  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7997] :

	fixed rtpproxy socket closing


2011-06-03 16:23:47  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7994] :

	don't try to terminate dialogs in state UNCONFIRMED or EARLY


2011-06-03 12:09:00  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7993] :

	Added asynchronous support for 'exec_cmd' function


2011-06-03 11:48:16  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7992] :

	added support for sips URI for is_other_contact function


2011-06-03 11:37:35  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7990] :

	init allow no RTPProxy when using database


2011-06-02 11:34:43  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7987] :

	error checking in RTPProxy reply


2011-06-01 19:37:57  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7986] :

	event_datagram: set svn:ignore property



2011-06-01 19:36:02  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7985] :

	evi: set svn:ignore property



2011-06-01 18:08:13  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7984] :

	further cseq validation fixes



2011-05-31 21:16:35  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7982] :

	b2b_entities: restore b2b_key_prefix



2011-05-31 19:13:13  Anca Vamanu, <anca at opensips dot org> 
	* [7981] :

	- 2 new features:
		- extended the db storage modes and now all the 3 types are supported: WRITE BACK(the existing one), WRITE THROUGH(new - synchonous storage in db) and NO DB.
		- apply body lumps before processing (for initial Invites on which b2b_init_request was called, and for sequential requests received by b2b with a body)


2011-05-31 16:55:44  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7980] :

	- proper cseq saving at invite time
	- proper validation of ACK messages



2011-05-31 13:00:23  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7979] :

	fixed event_datagram socket matching


2011-05-30 19:45:19  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7977] :

	b2b_logic: fix compiler warning



2011-05-30 14:05:16  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7975] :

	fixed rtpproxy timeout list when reloading from database


2011-05-27 17:54:36  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7972] :

	update dialog timer only if different from the default value


2011-05-27 16:27:50  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7971] :

	removed dlg_flag parameter 



2011-05-27 16:15:24  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7970] :

	removed bye_on_timeout_flag parameter



2011-05-27 15:49:34  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7969] :

	- changed create_dialog() flag names
	- create_dialog() also accepts vars as parameter



2011-05-27 15:00:32  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7967] :

	increased information details when accept or listen functions fail


2011-05-27 12:20:27  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7966] :

	fixed the accidently removed features in the last commit


2011-05-26 14:28:12  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7964] :

	Initial implementation of OpenSIPS Event Interface
	new 'event_datagram' evi transport module


2011-05-26 12:18:12  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7963] :

	- increased default ping interval to 30 s
	- terminate dialogs in case of 408 and 481



2011-05-25 18:45:29  Anca Vamanu, <anca at opensips dot org> 
	* [7961] :

	- handle the case where the message doesn't have a via branch


2011-05-24 12:37:23  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7957] :

	- fixed 64 bit compile warning
	- less aggressive logging for phones that don't support option methods in dlg



2011-05-23 17:51:49  Anca Vamanu, <anca at opensips dot org> 
	* [7952] :

	- added some more fileds in the dummy message generated when a local reply was received (needed by the last commit)


2011-05-23 12:14:06  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7951] :

	fixed rtpproxy 'rtpp_notify_socket' parser
	credits go to Anca Vamanu


2011-05-23 12:04:56  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7950] :

	more debugging info for replies to pings with code >=300


2011-05-23 10:57:03  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7948] :

	reset pattern string to an empty value after each row
	detailed errors when fetching database rows


2011-05-20 18:55:21  Anca Vamanu, <anca at opensips dot org> 
	* [7947] :

	- added the possibility to include the initial callid in a header in the generated Invites; you can enable this feature by setting the init_callid_hdr parameter with the name of the header


2011-05-19 15:19:21  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7945] :

	scripts: dialog table scripts re-generated



2011-05-19 15:17:39  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7944] :

	db: set proper version for dialog table



2011-05-19 13:43:20  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7943] :

	- updated dialog db schema
	- save extra information about SIP pings in DB
	- do not acquire dlg lock for requests in dialogs that do not have pinging enabled
	- do not register extra TM callbacks for replies in dialogs that do not have pinging enabled



2011-05-19 13:18:42  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [7941] :

	Fixed crash in mediaproxy module due to insufficient buffer size



2011-05-17 17:12:00  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7940] :

	Optionally,create_dialog() also receives a string parameter, which specifies whether the dialog end-points should be pinged via SIP options messages. The parameter can be "C" to specify to only ping the caller, "c" to only ping the callee or "Cc" to ping both dialog sides. If one end-point fails to respond to a options ping in ping_interval ( configurable parameter ) seconds, OpenSIPS will terminate the dialog from the middle.


2011-05-11 18:34:12  Anca Vamanu, <anca at opensips dot org> 
	* [7938] :

	- changed last commit


2011-05-11 17:46:00  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7937] :

	Initilized rtpproxy list for MI processes
	Rtpproxy fallback when port limit is reached


2011-05-11 16:22:02  Anca Vamanu, <anca at opensips dot org> 
	* [7935] :

	- fixed buffer overflow bug


2011-05-11 00:11:34  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7933] :

	reset 'q' param when a new RURI is set



2011-05-06 21:15:47  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7932] :

	b2b_logic: compressing the code by using some #define



2011-05-04 19:37:07  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7930] :

	b2b: API rework - new signature for b2b_send_request/b2b_send_reply



2011-05-04 19:09:33  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7929] :

	b2b_logic: fix error condition test for send_request



2011-05-04 13:18:02  Anca Vamanu, <anca at opensips dot org> 
	* [7928] :

	- decreased log level from ERROR to INFO for Subscriptions to not handled event
	- modified get_local_contact not to write the contact if it is udp


2011-05-03 22:53:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7927] :

	registrar: decreasing domain size to match the db size (128->64)



2011-05-03 19:57:38  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7926] :

	registrar: documentation updates



2011-05-03 18:15:20  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7925] :

	registrar: save() can be called now from onreply_route allowing registration caching

	 - credits goes to Anca-Maria Vamanu and Ovidiu Sas



2011-05-02 19:21:14  Anca Vamanu, <anca at opensips dot org> 
	* [7923] :

	- changed last fix


2011-05-02 19:18:34  Anca Vamanu, <anca at opensips dot org> 
	* [7922] :

	-added a missing check if memory allocation is successful 


2011-04-29 21:10:30  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7921] :

	- new remove_branch(int|var) script function added - provided by opensips core


2011-04-29 21:08:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7920] :

	 new internal remove_branch() function added


2011-04-29 11:53:51  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7919] :

	Added SIP-wise URI matching for validating dialog remote contact and route headers


2011-04-28 18:22:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7918] :

	- fixed bogus return code when set id is given via pvars.



2011-04-27 17:00:32  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7916] :

	Handle contacts under usrloc domain lock


2011-04-27 12:55:54  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7915] :

	updated default script to reflect the latest RR changes


2011-04-27 12:54:22  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7914] :

	removed 'enable_full_lr' parameter


2011-04-27 12:39:26  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7913] :

	small optimisations to compare_uris() func


2011-04-27 11:33:54  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7912] :

	fixed missing include


2011-04-27 10:20:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7909] :

	- fixed setting dialog timeout in sequential requests from other modules (via callbacks) like SST - run the callbacks before setting the timeout.


2011-04-27 10:18:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7908] :

	- fixed dialog creation in failure route - this may happen in some complex load-balancing scenarios


2011-04-26 14:10:18  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7906] :

	fixed bug in $ct.fields() pvar, where last param in contact header would have a quoted value


2011-04-25 17:01:15  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7905] :

	Added the ability to limit the number of results returned from dispatcher call. The default entry is not counted into the total.
	It adds the following calls and docs for them (+ a little bit of cleanup):

	ds_select_dst(set, alg, max_results)
	ds_select_domain(set, alg, max_results)


	Closes patch 3189329
	Credits go to Stanislaw Pitucha.


2011-04-22 17:03:31  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7904] :

	updated documentation to reflect latest changes


2011-04-21 19:24:38  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7903] :

	Enhancement to core
	1. Add new pvar $hdrcnt(name). Same semantics as $hdr, but returns the number of headers of the given name/type.
	2. Add new transform {param.exist,name} which returns 1 if parameter of given name exists, else 0. This is useful for testing params that don't have values (e.g., lr,ob).

	Closes patch #3279581
	Credits go to Kennard White.


2011-04-21 19:23:45  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7902] :

	vars, profiles and script_flags column names from the dialog module can now be set from the script
	closes bug 3260255


2011-04-21 19:15:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7901] :

Adds new script transform family {via.*} very much like {uri.*}. Allows access to Via headers from script-land, primarily for logging purposes.

	Closes patch #3286072
	Credits go to Kennard White.


2011-04-21 19:00:49  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7900] :

	* fixed small bug in latest modifications to parser, where last URI param would be an unknown one with a value

	* added compare_uris() function that should be used where URI matching according to RFC 3261 is a must.



2011-04-21 15:43:51  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7899] :

	fixed documentation mistake


2011-04-20 20:14:58  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7898] :

	parser: adding support for unkonwn URI params



2011-04-20 18:20:41  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7897] :

	use estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need to use a hardcoded value




2011-04-20 18:14:46  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7896] :

	- fetch_rows module parameters removed - its job was replaced by the estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need for manual control 




2011-04-20 18:09:46  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7895] :

	use estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need to use a hardcoded value




2011-04-20 18:05:09  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7894] :

	- fetch_rows module parameters removed - its job was replaced by the estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need for manual control 



2011-04-20 17:57:26  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7893] :

	use estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need to use a hardcoded value



2011-04-20 17:32:33  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7891] :

	fixed bug in $ct.field() pvar


2011-04-20 14:42:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7890] :

	use estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need to use a hardcoded value




2011-04-20 14:34:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7889] :

	- fetch_rows module parameters removed - its job was replaced by the estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need for manual control 




2011-04-20 14:21:21  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7888] :

	use estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need to use a hardcoded value



2011-04-20 14:17:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7887] :

	- fetch_rows module parameters removed - its job was replaced by the estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need for manual control 



2011-04-20 14:10:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7886] :

	- dr_fetch_rows module parameters removed - its job was replaced by the estimate_available_rows() function - this function will auto-detect how many rows can be loaded at a time in memory, so no need for manual control 


2011-04-20 13:23:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7885] :

	- removed the RO db user


2011-04-20 12:49:55  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7884] :

	- updates related to default URL


2011-04-20 12:46:50  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7883] :

	last step in removeing the compile time default db url


2011-04-20 12:37:09  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7882] :

	- adapted the db_url configuration to the new logic (based on a db_default_url)




2011-04-20 12:06:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7881] :

	- adapted the db_url configuration to the new logic (based on a db_default_url)



2011-04-20 11:49:30  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7880] :

	- adapted the db_url configuration to the new logic (based on a db_default_url)



2011-04-20 11:27:04  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7879] :

	- small fixed related to include files


2011-04-20 11:24:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7878] :

	- adapted the db_url configuration to the new logic (based on a db_default_url)


2011-04-20 11:21:49  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7877] :

	added new macro for db_url init in modules (taking into consideration the defautl db_url)


2011-04-20 10:59:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7876] :

	- added new global parameter to define a default db_url:
		db_default_url, default value NULL
	  (work in progress)


2011-04-18 19:27:52  Anca Vamanu, <anca at opensips dot org> 
	* [7875] :

	- modify the offline_body functions to return status codes allowing the caller to detect success and blank full dialogs, and continue aggregation as necessary.
		( credits to Andrew Morsten  at upenn.edu)


2011-04-18 19:25:14  Anca Vamanu, <anca at opensips dot org> 
	* [7874] :

	- check if body received in Notify is valid (avoid accepting big bodies that are fragmented)
		(credits to Andrew Morsten  at upenn.edu)


2011-04-18 15:34:51  Anca Vamanu, <anca at opensips dot org> 
	* [7873] :

	- fixed some locking issues


2011-04-15 14:52:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7872] :

	port from 1.6.x branch (rev #7869 - #7871):
	- make errors visible during module init


2011-04-15 13:04:23  Anca Vamanu, <anca at opensips dot org> 
	* [7867] :

	- fixed subscription status when no pres-rules document is found (reported by mobius #irc)


2011-04-13 15:27:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7865] :

	- add a clear warning on groupID (for do_routing) - it must contain a numnerical value (as number type).


2011-04-13 15:13:26  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7864] :

	added new function is_other_contact


2011-04-07 15:02:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7862] :

	- fix bug in encode.hexa transformation (failing on high ascii)
		Credits go to Walter Doekes.
		Closes bug report 3263660
	- ip.resolve transformation returns empty string if the DNS resolving fails


2011-04-05 15:26:15  Anca Vamanu, <anca at opensips dot org> 
	* [7860] :

	- fixed documentation bug - reported in #3189309 by Stanislaw Pitucha


2011-04-04 18:37:27  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7858] :

	fixed sign issue when getting string length
	Credits go to RMod and UnixDev


2011-04-04 15:43:49  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7856] :

	fixed typo
	credits go to Richard Revels


2011-04-03 21:02:17  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7854] :

	b2b_entities: fix compilation warnings



2011-04-01 20:16:15  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7853] :

	b2b_logic: check for valid body before creating the tuple (top hiding scenario)



2011-04-01 18:07:01  Anca Vamanu, <anca at opensips dot org> 
	* [7852] :

	- fixed crash in dialog mix presence because of not calling the proper free function


2011-04-01 05:21:00  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7851] :

	b2b_logic: fix error probe typo



2011-04-01 05:01:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7850] :

	b2b_logic: define states for b2b_logic entities



2011-03-28 17:48:58  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7849] :

	b2b_entities: do not add a new leg for entities in B2B_TERMINATED state



2011-03-28 17:32:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7848] :

	b2b_entities: proper return for b2b_send_request while trying to send
	              a request in B2B_TERMINATED state



2011-03-28 17:14:56  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7847] :

	b2b_entities: allow client entities with dlg with no legs to send requests



2011-03-28 17:08:58  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7846] :

	b2b_entities: new debug function: print_b2b_dlg



2011-03-28 17:03:34  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7845] :

	b2b_entities: save clid into dummy dlgs for client entities



2011-03-25 16:31:28  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7844] :

	uac: collapsing auth.[hc], auth_alg.[hc] and auth_hdr.[hc] under auth.[hc]



2011-03-25 15:20:07  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7842] :

	Returned "" when no sdp line is found


2011-03-25 12:52:06  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7840] :

	Fixed - don't terminate dialog in EARLY or UNCONFIRMED state


2011-03-24 21:18:33  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7839] :

	uac: integrate the authenticaiion header parsing with the parser api



2011-03-24 17:07:14  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7838] :

	uac: breaking authenticate_body struct into two new structures:
	 - authenticate_body - struct used for parsing
	 - authenticate_nc_cnonce - struct used for holding nc and cnonce



2011-03-23 19:52:06  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7837] :

	presence_callinfo: documentation updates



2011-03-23 15:41:50  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7836] :

	b2b_logic: fix expired call detection if server start happens after call the call expired



2011-03-23 13:41:48  Anca Vamanu, <anca at opensips dot org> 
	* [7835] :

	- unified the dialogs timeout mechanism to be controlled through only one parameter (reported by Ovidiu Sas)


2011-03-23 13:30:19  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7834] :

	refactored some code
	added extra debugging traps for TCP sending


2011-03-23 00:12:41  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7833] :

	b2b_logic: fix call disconnect after server restart

	 - after a server restart, the dlginfo is no longer available,
	   but in dialog requests can be sent even if the dlginfo
	   structure is not available.



2011-03-21 19:56:05  Anca Vamanu, <anca at opensips dot org> 
	* [7832] :

	- stored also lifetime in database (updated schema, increased table version) 
	(reported by Ovidiu Sas)


2011-03-21 18:34:50  Anca Vamanu, <anca at opensips dot org> 
	* [7831] :

	- save in transaction the flags set in local_route (then you can check them in onreply route)


2011-03-21 18:30:46  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7830] :

	b2b: on server start, mark tuples without entities as expired

	 - the cleanup timer will remove all this ghost tuples



2011-03-21 16:57:18  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7828] :

	presence_callinfo: configurable timeout notifications for call-info and line-seize events



2011-03-21 16:43:41  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7827] :

	b2b_logic: more verbosity for "b2b_list" fifo command



2011-03-21 16:10:54  Anca Vamanu, <anca at opensips dot org> 
	* [7825] :

	- call b2b_reply route also for FAKED_REPLY


2011-03-19 02:53:08  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7824] :

	b2b_entities: silence an error probe that was popping up during b2b paralel call forking



2011-03-19 01:57:53  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7823] :

	presence: documentation updates

	 - mi command: pres_phtable_list
	 - mi command: subs_phtable_list



2011-03-19 01:21:51  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7822] :

	presence: the subscription timeout notification is now configurable

	 - "line-seize" presence event does not need to send out timeout notifications



2011-03-18 13:53:39  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7820] :

	fixed 'dlg_list' mi function to return proper timeout value


2011-03-17 19:48:03  Anca Vamanu, <anca at opensips dot org> 
	* [7819] :

	- completed the fix to allow Publish with expires=0 and body


2011-03-17 01:04:09  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7818] :

	presence: new mi command: subs_phtable_list

	 - subs_phtable_list command allow inspection of active subscription records



2011-03-16 19:54:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7817] :

	registrant: support for outbound proxy completed



2011-03-16 19:36:24  Anca Vamanu, <anca at opensips dot org> 
	* [7816] :

	- fixed last commit - wrong label usage


2011-03-16 19:06:44  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7814] :

	added the posibility to check if an argv was specified


2011-03-16 17:46:43  Anca Vamanu, <anca at opensips dot org> 
	* [7813] :

	- added the possibility to set an outbound proxy for B2BUA (setting $du before calling b2b_init_request will have effect now)


2011-03-16 16:59:36  Anca Vamanu, <anca at opensips dot org> 
	* [7812] :

	- fix: expired records not deleted from presentity database (reported by Ovidiu Sas)


2011-03-16 13:29:20  Anca Vamanu, <anca at opensips dot org> 
	* [7811] :

	-completed recent commits 


2011-03-16 10:53:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7810] :

	- fixed compiling issues on xxxBSD


2011-03-15 21:48:39  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7809] :

	presence: new mi command: pres_phtable_list

	 - pres_phtable_list command allow inspection of active presentity records



2011-03-15 20:51:56  Anca Vamanu, <anca at opensips dot org> 
	* [7808] :

	- fixes and improvements:
		- pua_dialoginfo: Publish for 'terminated' state has expires=0
		- pua: accept Publish with expires 0. Fixed record leaks (db and memory) - delete them immediately not when expired.
		- presence: send Notify for mixed dialog-presence when Publish with expires 0 for dialog event is received.


2011-03-15 18:29:11  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7807] :

	refactored some code
	increased TCP send buffer at startup. In case there are some network problems with TCP, a bigger buffer will avoid application level blocking of write() calls


2011-03-15 18:18:20  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7806] :

	presentity: fix extra_headers event notifications



2011-03-15 18:12:29  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7804] :

	fixed missing include for 'struct dlg_cb_params'


2011-03-15 18:01:45  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7803] :

	- fixed crash when initial Invite has bad To header


2011-03-14 19:48:54  Anca Vamanu, <anca at opensips dot org> 
	* [7801] :

	- completed the last commit


2011-03-14 14:40:28  Anca Vamanu, <anca at opensips dot org> 
	* [7800] :

	- performance improvements in presence module
		- use the info stored in memory to check if a Publish entry exists
		- eliminate unnecessary memory allocations


2011-03-14 04:20:46  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7799] :

	b2b_logic: new api method: register_cb

	 - allows a module to register a callback into a b2b_logic tuple



2011-03-10 16:23:20  Anca Vamanu, <anca at opensips dot org> 
	* [7797] :

	- fix: don't exit the script is error in t_relay (reported by Amit Sharma)


2011-03-10 00:23:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7796] :

	rtpproxy: svn stuff (update ignore list and svn keywords)



2011-03-09 16:29:16  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7794] :

	- fixed test condition on "unset_profile" return code. This bug was triggering a false ERROR log. The bug had no functionality impact.

	Credits goto Chase Venters.


2011-03-09 16:24:50  Anca Vamanu, <anca at opensips dot org> 
	* [7793] :

	- put <> in To header for consistency (reported by Jeff Pyle)


2011-03-09 16:19:07  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7791] :

	- fixed documentation typo


2011-03-09 14:30:38  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7790] :

	moved all functions related to RTPProxy in a new module called rtpproxy


2011-03-09 12:49:54  Anca Vamanu, <anca at opensips dot org> 
	* [7788] :

	- fixed - explicit parse of from header before using it


2011-03-09 02:49:27  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7787] :

	pua: when a PUBLISH event is queued, extra headers must be preserved (just like the body)



2011-03-08 01:32:56  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7785] :

	registrant: update svn keywords



2011-03-08 01:30:12  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7784] :

	registrant: compact all the auth code into a single file



2011-03-08 00:15:43  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7783] :

	registrant: WWW/Proxy_Authenticate header parser integrated into the registrant module



2011-03-08 00:01:20  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7782] :

	parser: support for parsing WWW/Proxy-Authenticate headers

	 - svn props updated for some files



2011-03-05 23:42:52  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7781] :

	registrant: direct access to the www/proxy authenticate header



2011-03-05 23:37:53  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7780] :

	parser: adding WWW-Authenticate and Proxy-Authenticate to the list of known headers



2011-03-04 19:56:59  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7779] :

	b2b_logic: updated README file for "b2bl_from_param_spec" param



2011-03-04 18:06:16  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7778] :

	b2b_logic: fix detection of empty PV for "b2bl_from_spec_param"



2011-03-04 17:14:46  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7776] :

	- fixed ugly dangling pointer when using the use_next_gw() function. Because of this, the newly set RURI could be corrupted.


2011-03-03 18:05:29  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7775] :

	b2b_logic: new param "b2bl_from_spec_param"

	 - This new param allows setting a custom "From" header for the outgoing INVITE



2011-03-03 16:37:48  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7774] :

	At startup, register callbacks for accounting for all dialogs saved in database


2011-03-02 18:25:39  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7773] :

	b2b_logic: no need for old_entity callback while bridging



2011-03-02 18:12:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7772] :

	b2b_logic: moving handling of "old_entity" inside the safe code path while handling bridging



2011-03-02 18:09:13  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7771] :

	b2b: b2b_entities API change

	 - b2b_send_request takes a new parameter that will enable or diable
	   callback notifications.  This is useful when a request is sent
	   for an entity that is about to be disconnected



2011-03-02 17:27:51  Anca Vamanu, <anca at opensips dot org> 
	* [7770] :

	- added more uniqueness to to tag generation (depends also on first via branch)


2011-03-02 13:54:36  Anca Vamanu, <anca at opensips dot org> 
	* [7767] :

	- fixed route header length calculation for UAC requests (closes bug #3190322, thanks to Ovidiu and Kamen for reporting)


2011-03-01 16:08:34  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7766] :

	b2b_logic: less verbose b2b_logic tuple debug printing



2011-03-01 16:07:28  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7765] :

	b2b_logic: re-set bridge_entities after one destination drops out



2011-03-01 12:11:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7763] :

	- fixed rank of the extra proc used for receiving timeout notifications from rtpproxy


2011-02-28 17:41:57  Anca Vamanu, <anca at opensips dot org> 
	* [7761] :

	- use ruri also when generating the to tag (useful for forked requests)


2011-02-25 21:33:05  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7759] :

	registrant: documentation updates



2011-02-25 17:39:17  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7758] :

	registrant: new module

	 - this module allows opensips to register itself on a remote registrar.
	 - for more info, check the README file



2011-02-24 18:42:43  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7757] :

	presence_callinfo: enable Call-Info header validation for received PUBLISH



2011-02-24 18:24:44  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7755] :

	- fixed parsing of quoted params in TO-like headers.
	  Reported by Ovidiu Sas.


2011-02-23 20:57:21  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7754] :

	presence_callinfo: setting svn:keywords



2011-02-22 18:04:36  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7753] :

	fixed error cases where load stat would not be decremented


2011-02-22 13:56:23  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7752] :

	documented the $stat exported pseudo-variable


2011-02-22 13:02:53  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7751] :

	Added extra debugging info


2011-02-21 17:59:13  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7750] :

	Added extra debugging functions. SIP msg processing, DNS queries and DB mysql queries can be timed, and if any of these operations exceed a given threshold, warnings messages will be triggered to the logging facility. Also, new statistics are available, that show the load on the children of each UDP interfaces, as well as the tcp load


2011-02-18 17:03:30  Anca Vamanu, <anca at opensips dot org> 
	* [7749] :

	- completion of the previous commit


2011-02-18 15:55:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7746] :

	- fixed missing data in "dst" part on net_rev info from sip_msg in local route
	  Closes bug 3164711


2011-02-18 15:40:12  Anca Vamanu, <anca at opensips dot org> 
	* [7745] :

	- changed the scope of some variables - a global variable with name stat caused crash on FreeBSD because of overwriting a library function with the same name-reported by Anton Zagorskiy


2011-02-18 11:21:30  Anca Vamanu, <anca at opensips dot org> 
	* [7743] :

	- fixed doc - module dependencies


2011-02-16 12:09:44  Anca Vamanu, <anca at opensips dot org> 
	* [7741] :

	- fixed crash in unexpected traffic pattern


2011-02-14 18:28:58  Anca Vamanu, <anca at opensips dot org> 
	* [7739] :

	- added check to prevent buffer overflow (credits to Andrew Mortensen, admorten at isc.upenn.edu)


2011-02-11 19:48:01  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7737] :

	tm: fix copy/paste error on previous commit



2011-02-11 19:30:55  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7735] :

	- fixed mem leak in SDP
	  Credits go to Ovidiu Sas


2011-02-11 19:07:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7734] :

	applied patch #3172168 - a parser the content of a Call-Info header.
	Credits go to Ovidiu Sas.


2011-02-11 18:59:01  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7733] :

	- when allocating a NEW URI (in SI requests first line) alloc an extra 1 byte as some regexp/dns related functions expect one byte end padding to make the "domain" part of RURI null terminated


2011-02-11 16:22:41  Anca Vamanu, <anca at opensips dot org> 
	* [7732] :

	- fixed wrong NOT NULL constraints in some column definitions for b2b_logic table (reported by Kamen Petrov)


2011-02-11 00:22:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7731] :

	b2b_logic: support for paralel forking implemented

	 - if the transaction for the received initial INVITE has multiple branches, for each branch 
	a new INVITE will be sent out
	 - paralel forking implemented only for "top hiding" scenario (for now)
	 - extra sanity check added for single entity during process_bridge_action()



2011-02-11 00:09:04  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7730] :

	b2b_logic: update b2bl_search_entity()

	 - b2bl_search_entity() will return a pointer to the list of client/server entity in the 
	current tuple, in addition to the entity that was searched for



2011-02-10 23:27:42  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7729] :

	b2b_logic: rework the output of b2bl_print_tuple()



2011-02-10 23:25:38  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7728] :

	b2b_logic: adding two new helper functions to deal with chained entities
	 - unchain_ent()
	 - b2bl_remove_single_entity()



2011-02-10 19:32:01  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7727] :

	b2b_logic: adding the ability to chain entities

	 - some extra checks for chained entities
	 - tuple printing function updated
	 - no entities are chained for now



2011-02-10 19:09:02  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7726] :

	b2b_logic: print a warning if the entity that we are trying to delete is missing



2011-02-10 18:28:31  Anca Vamanu, <anca at opensips dot org> 
	* [7725] :

	- fixed a case when the system tried to insert twice a record in database


2011-02-10 17:03:37  Anca Vamanu, <anca at opensips dot org> 
	* [7723] :

	- fixed headers not parsed before usage bug - resulted in crash


2011-02-10 05:10:01  Di-Shi Sun <di-shi at transnexus dot com> 
	* [7722] :

	1. Fixed NULL string issue on Solaris.
	2. Added install_module_custom in Makefile.


2011-02-09 23:37:12  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7720] :

	b2b_logic: rework create_top_hiding_entities()



2011-02-09 22:47:24  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7719] :

	b2b_logic: destroy the disconnected entity while bridging



2011-02-09 22:34:54  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7718] :

	b2b_logic: rework post_cb_sanity_check() logic



2011-02-09 20:46:45  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7717] :

	b2b: exposing B2BL_MAX_KEY_LEN to all b2b modules



2011-02-09 19:14:55  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7716] :

	b2b_logic: define a static str for CANCEL



2011-02-09 18:57:47  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7715] :

	b2b_logic: moving SEND_REPLY_TO_PEER_OR_GOTO_DONE inside the switch (preparing the code for features)



2011-02-09 18:46:02  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7714] :

	b2b_logic: adding a #define for sending a reply to peer (makes the code easier to read)



2011-02-09 16:10:37  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7713] :

	b2b_entities: enhancing error probe for 'dialog not found'



2011-02-09 11:21:29  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7711] :

	fixed data alignment for cdrs generation


2011-02-08 06:41:09  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7710] :

	b2b_logic: bridging is permited only in DLG_CONFIRMED state



2011-02-08 05:52:02  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7709] :

	b2b_logic: while bridging calls, do not send extra headers in reINVITE



2011-02-04 21:41:20  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7708] :

	b2b_logic: making b2bl_print_tuple() log level configurable



2011-02-04 03:47:51  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7707] :

	b2b_logic: propagate From Display Name in "top hiding" scenario



2011-02-03 19:40:06  Marc Leurent <lftsy at leurent dot eu> 
	* [7706] :

	Marc Leurent <marc.leurent@vtx-telecom.ch>
	 - Dialplan module has been merged into core => removing packaging
	 - Add presence_callinfo module into packaging


2011-02-03 18:13:44  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7704] :

	b2b_logic: using RURI to generate fromtag for outgoing calls (to provide more uniqueness)



2011-02-03 16:50:58  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7703] :

	b2b_logic: compressing three debug probes into one



2011-02-03 16:44:49  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7702] :

	b2b_logic: replace multiple 'if/else" statements with 'switch' statement



2011-02-03 16:22:19  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7700] :

	if media timeout isn't required don't try to get the lock when reloading rtpproxy list


2011-02-03 00:33:30  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7699] :

	b2b_logic: split b2b_logic_notify into b2b_logic_notify_request and b2b_logic_notify_reply 
	for better maintainability



2011-02-02 22:01:24  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7698] :

	b2b_logic: moving operations that doesn't require a lock outside the htable lock
	 - msg header parsing
	 - msg body extraction
	 - building the extra_header str



2011-02-01 01:43:49  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7697] :

	b2b_entities: concatenate some DBG logs



2011-02-01 01:34:53  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7696] :

	b2b_logic: check return code from b2bl_drop_entity while performing 'mi_b2b_bridge'



2011-01-28 17:28:49  Anca Vamanu, <anca at opensips dot org> 
	* [7695] :

	- fixed memory leak


2011-01-28 16:34:40  Anca Vamanu, <anca at opensips dot org> 
	* [7693] :

	- fixed compilation warning


2011-01-28 16:28:00  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7692] :

	b2b_logic:
	 - free to_uri outside the htable lock
	 - using a local variable for client entity before saving it into the tuple



2011-01-28 14:38:25  Anca Vamanu, <anca at opensips dot org> 
	* [7691] :

	- fixed typo - reported by Richard Revels, bug  #3166270


2011-01-28 14:26:45  Anca Vamanu, <anca at opensips dot org> 
	* [7688] :

	- fixed type ( reported in bug #3166065)


2011-01-28 12:17:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7686] :

	- fixed pvar overlapping - both auth realm and auth response were defined as $ar. auth response moved as $auth.resp
	 Credits for report go to medve on IRC channel


2011-01-27 21:24:57  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7685] :

	b2b_logic: check if "scenario" is valid while adding a new record 



2011-01-25 18:55:01  Anca Vamanu, <anca at opensips dot org> 
	* [7684] :

	- applied patch from Vallimamod Abdullah (patch #3162656) - fix aggregation for multiple dialogs for same line


2011-01-24 15:26:51  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7682] :

	RTPProxy load balancer can now handle weight 0 for a rtpproxy.
	Updated documentation.


2011-01-23 19:36:05  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7681] :

	textops: fix minor documentation errors for is_audio_on_hold()



2011-01-21 17:44:20  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [7679] :

	Added support for parsing xcap-diff event instead of the old xcap-change



2011-01-21 15:54:50  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7675] :

	Added pseudo-variable support for pattern parameter in check_addr and check_source_address functions
	Closes feature request #3162953


2011-01-20 18:34:21  Anca Vamanu, <anca at opensips dot org> 
	* [7674] :

	- allowed exec_avp and exec_env to be used from STARTUP_ROUTE


2011-01-20 15:33:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7671] :

	- fixed len for "cseq"-like fields in dialog table
	  Reported by Henk Hesselink
	  Closes bug id #3159457


2011-01-20 15:23:06  Anca Vamanu, <anca at opensips dot org> 
	* [7670] :

	- 2 additions:
		- use_init_sdp can be specified per scenario
		- use also via branch parameter when generating from_tag to get more unique dialogs (credits to Ovidiu Sas for idea)


2011-01-19 18:29:39  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7669] :

	b2b_entities: improved dlg match-ing algorithm for tm cb

	- on tm callback, continue searching in the list for all dialogs, until we match the proper 
	transaction.  If none is found, then handle the reply as retransmission.



2011-01-19 17:32:49  Anca Vamanu, <anca at opensips dot org> 
	* [7667] :

	- fixed type - credits Klaus


2011-01-19 17:24:41  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7665] :

	fixed rtpproxy force lookup to return the correct port
	credits go to Ruslan Bukin


2011-01-19 17:19:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7662] :

	-dialog state machine accepts requests while in early state (if not BYE).
	 Reported by Sven Schulz


2011-01-19 17:19:18  Anca Vamanu, <anca at opensips dot org> 
	* [7661] :

	- fixed typo bug - credits to Olivier Detour


2011-01-19 15:53:58  Anca Vamanu, <anca at opensips dot org> 
	* [7659] :

	- fixed memory leak


2011-01-17 12:59:58  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7656] :

	fixed bug where postgres module would set NUL flag to empty strings


2011-01-17 04:49:44  Di-Shi Sun <di-shi at transnexus dot com> 
	* [7655] :

	1. Added unsupport char check in From/To user part.
	2. Fixed number portability parameter parsing issue caused by user=phone.


2011-01-13 21:30:34  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7653] :

	b2b_logic: code refurbishing

	 - '0' replaced with 'NULL'
	 - adding DBG probes about dropped branches in 'top hiding' scenario
	 - free extra_headers outside the hash table lock (in 'top hiding' scenario)



2011-01-13 20:11:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7652] :

	b2b_entities: '0' replaced with 'NULL' and some DBG probes enahenced



2011-01-13 12:10:53  Anca Vamanu, <anca at opensips dot org> 
	* [7651] :

	- fixed send_sock not set for a newly created client (possible crash)


2011-01-12 18:11:02  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7647] :

	- fixed VSA handling when creating RADIUS AVPS


2011-01-11 18:56:33  Anca Vamanu, <anca at opensips dot org> 
	* [7645] :

	- fixed in BLA - version not full for aggregated state


2011-01-11 17:07:09  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7643] :

	Updated documentation
	Realeased lock when a bug appears


2011-01-11 16:39:15  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7641] :

	Don't terminate dialog if it is in UNCONFIRMED or EARLY state


2011-01-08 01:50:46  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7640] :

	b2b_entities: check is "send_sock" is valid inside a "dlg" before printing it



2011-01-06 17:34:33  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7639] :

	b2b_entities: new mi command: b2be_list

	 - allows inspection of in memory b2b entities



2011-01-06 17:28:39  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7638] :

	b2b_entities: removing a DBG probe



2011-01-06 14:13:52  Anca Vamanu, <anca at opensips dot org> 
	* [7636] :

	- added a module parameter - b2b_key_prefix, useful when using more opensips b2bua instances
	- fix - callid made 'more unique'


2011-01-05 12:52:52  Anca Vamanu, <anca at opensips dot org> 
	* [7634] :

	- fixed segmentation fault in libxml2 due to recently added xmlFreeNsList function


2011-01-05 12:21:48  Anca Vamanu, <anca at opensips dot org> 
	* [7633] :

	- new function in exported api - get_stats for an ongoing call


2011-01-03 20:00:30  Marc Leurent <lftsy at leurent dot eu> 
	* [7631] :

	Marc Leurent <marc.leurent@vtx-telecom.ch>
	- Correct some packages description
	  Not backporting modifications on Debian Etch, not using it anymore since a while
	  Please consider backporting it and and missing modules


2011-01-03 18:56:13  Marc Leurent <lftsy at leurent dot eu> 
	* [7629] :

	Marc Leurent <marc.leurent@vtx-telecom.ch>:
	* Update to correct opensips bug ID #3150424
	  Add Debian missing dependency for libpcre3-dev package (found using clean pbuilder build)
	  Tested for Debian Squeeze i386 and amd64
	  => going to update trunk version too



2011-01-03 18:28:41  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7627] :

	Renamed RTPProxy patch to be included in tarballs


2011-01-03 14:11:41  Anca Vamanu, <anca at opensips dot org> 
	* [7623] :

	- fixed wrong db type specification for column leg_cseq ( applied patch from Henk Hesselink, closes patch #3149507)


2011-01-03 13:12:03  Anca Vamanu, <anca at opensips dot org> 
	* [7622] :

	- fixed not specifying the namespace in presence xml document


2010-12-23 16:37:39  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7620] :

	fix missed modules documentation installation by replacing 'install-modules' by 'install-modules-all' in 'install' target. The target 'install-modules-all' runs 'install-modules' and 'install-modules-doc' targets.

	make 'install-modules-doc' safer to prevent overwriting global README file.

	Credits go to John Khvatov


2010-12-23 12:48:44  Anca Vamanu, <anca at opensips dot org> 
	* [7618] :

	- mi_profile_list: flush data from time to time to prevent memory getting filled up


2010-12-23 11:32:59  Anca Vamanu, <anca at opensips dot org> 
	* [7616] :

	- fixed lock not released on error
	- fixed unreachable code


2010-12-22 15:30:53  Anca Vamanu, <anca at opensips dot org> 
	* [7613] :

	- fixed wrong increase of expires value - reported by Klaus Darilion


2010-12-22 13:23:06  Anca Vamanu, <anca at opensips dot org> 
	* [7612] :

	- new feature: allow B2BUA to run on multiple interfaces and construct dynamically the contact from the socket the request was received ( closes feature request #3125549)


2010-12-22 11:21:00  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7611] :

	database storage is now optional (closes feature request 3125548)
	can now be enabled by setting 'db_url' module parameter


2010-12-20 21:36:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7603] :

	- separte package for dialplan


2010-12-20 20:49:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7598] :

	port from trunk:
	- fixed solaris compiling
	- fixed license


2010-12-20 19:57:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7592] :

	- fixed xxxBSD compile warning


2010-12-20 19:14:05  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7589] :

	- fixed handling of lumps_len - avoid reusage of its value from other messages when current message has no body
	  Credits go to Christophe Sollet 
	  Closes patch 3042399


2010-12-20 19:11:56  Anca Vamanu, <anca at opensips dot org> 
	* [7588] :

	- fix: change the meaning of expires_offset parameter( do not subtract if from the returned expires, but increase the period to store the subscription with it), reported in bug #3069214


2010-12-20 17:37:28  Anca Vamanu, <anca at opensips dot org> 
	* [7586] :

	- fixed error in last commit


2010-12-20 17:09:56  Anca Vamanu, <anca at opensips dot org> 
	* [7585] :

	- aligned with 1.6 


2010-12-20 16:57:12  Anca Vamanu, <anca at opensips dot org> 
	* [7583] :

	- fixed crash in error case


2010-12-20 16:15:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7581] :

	- docs updated


2010-12-20 16:15:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7580] :

	- DBG removed


2010-12-20 15:58:51  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7577] :

	port from trunk (rev #7576):
	-removed bogus test on RURI when input is actually give via pvars.
	 Credits go to Amduscias (IRC) 


2010-12-20 15:27:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7574] :

	port from 1.6 branch (rev #6901)
	Add access to contintent_code. Credit to ledda.


2010-12-20 13:24:38  Anca Vamanu, <anca at opensips dot org> 
	* [7571] :

	- fixed expires value notification at timeout(reported in bug #3140296)


2010-12-20 10:58:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7569] :

	- do not use a static holder for parameters when calling the TM callbacks - in some b2bua scenarios, the TM callback may be nasted, and parameters gets overwriten.
	  Reported by Ovidiu Sas.


2010-12-17 19:55:18  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7567] :

	Removed "detect_rtp_idle" module parameter - notifications can be enabled
	by setting the "rtpp_notify_socket" module parameter.
	rtpproxy_offer and rtpproxy_answer can now receive 'n' flag as a parameter
	to activate timeout notifications for a certain call.


2010-12-17 17:34:22  Anca Vamanu, <anca at opensips dot org> 
	* [7566] :

	- fix crash in a buggy uac behavior situation


2010-12-17 14:49:25  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7563] :

	- fixed bogus line introduced with the prev commit


2010-12-17 10:38:38  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7561] :

	- fixed handling of WANT_READ / WANT_WRITE events in TLS code. Description:
	  
	tls_blocking_write() polls for both POLLOUT and POLLIN at the same time. Normally, socket is ready for write all the time. It causes poll() at line 765 returned immediately.

	When using t_relay("tls:xxx") in script, I always get "too many retries with no operation" error message because poll() function returns immediately.

	I read the OpenSSL doc http://www.openssl.org/docs/ssl/SSL_connect.html and http://www.openssl.org/docs/ssl/SSL_get_error.html#item_SSL_ERROR_WANT_READ.
	When SSL_connect(), SSL_read(), or SSL_write() return SSL_ERROR_WANT_READ, tls_blocking_write() should poll for POLLIN only. And when they return SSL_ERROR_WANT_WRITE, tls_blocking_write() should poll for POLLOUT only.

	I think this bug also makes CPU usage to be 100% while looping.


	Credits for the fix go to Worawit Wang.

	Closes Bug report #3061895
	Closes Patch #3118263



2010-12-17 10:24:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7559] :

	- fixed pcre lib detection on Solaris
	  Credits go to Sergio Gutierrez
	  Closes patch #3138136


2010-12-17 10:05:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7557] :

	- fixed several issues with prepared statements when dealing wiht DB reconnect events.
	  Credits go to Stanislaw Pitucha.
	  Closes bug report #3039943


2010-12-16 18:51:11  Anca Vamanu, <anca at opensips dot org> 
	* [7554] :

	- fixed crash when presence module was used in library mode (reported by #3138571)


2010-12-16 16:28:03  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7550] :

	Fixed small bug introduced in the last commit


2010-12-16 12:46:49  Anca Vamanu, <anca at opensips dot org> 
	* [7549] :

	- fixed possible mem leak


2010-12-15 19:19:49  Anca Vamanu, <anca at opensips dot org> 
	* [7546] :

	implemented a listener for rtpproxy timeout notifications
	added a patch for rtpproxy with a new timer for session establishment


2010-12-15 18:04:51  Anca Vamanu, <anca at opensips dot org> 
	* [7544] :

	- fixed dialog info version (reported by Ovidiu Sas)


2010-12-15 16:48:22  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7543] :

	b2b_logic: custom headers can be set in the outgoing INVITE via the internal api



2010-12-15 13:49:09  Anca Vamanu, <anca at opensips dot org> 
	* [7541] :

	- fix adding xmlns attribute twice (credits to Andrew Mortensen, admorten at isc.upenn.edu)


2010-12-15 12:35:52  Anca Vamanu, <anca at opensips dot org> 
	* [7539] :

	- fixes in bla (reported by University of Pennsylvania, ISC/Networking & Telecom Dep.)
		- increase version per watcher
		- correct aggregation of dialogs


2010-12-14 11:36:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7536] :

	- expose internal ret code for authentication function - you can see in the script if the failure was because of an error or because of auth rejected.
	- do not log as error if some RADIUS AVP from response set were not found


2010-12-13 18:50:45  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7524] :

	presence: print a warning in the logs for a failed NOTIFY



2010-12-13 18:41:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7523] :

	port from 1.6:
	fixed compile warnings


2010-12-13 16:34:50  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7509] :

	- small fixes in binding to dialog


2010-12-13 14:57:50  Anca Vamanu, <anca at opensips dot org> 
	* [7507] :

	- fixed - wrong definition of process_body function for events xcap-diff and message-summary


2010-12-10 21:16:49  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7504] :

	presence: set the default value to '' for extra_hdrs field from presentity table



2010-12-10 18:13:04  Anca Vamanu, <anca at opensips dot org> 
	* [7502] :

	- fixed crash in prepare statements (thanks to Duane Larson for help with debugging)


2010-12-09 20:09:49  Anca Vamanu, <anca at opensips dot org> 
	* [7500] :

	- fixed returning expired record


2010-12-09 17:15:25  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7498] :

	reset cdr_flag if dialog module not loaded


2010-12-09 04:59:50  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7497] :

	presence_callinfo: update svn ignore list



2010-12-09 04:57:37  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7496] :

	b2b_logic: B2B_CONFIRMED_CB - new calback



2010-12-08 18:08:10  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7495] :

	b2b_logic: integrate post_cb_sanity_check() with pre-existing callbacks



2010-12-08 18:07:00  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7494] :

	pua_bla: whitespace and commented out probe removed



2010-12-08 16:04:39  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7487] :

	- fixed (another) bug in replacing the contact by fix_nated_contact()


2010-12-08 13:44:13  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7485] :

	- fixed bug in locking dialog while printing it via MI
	- included the dialog vals and profiles to be printed as part of dialog context (via dlg_list_ctx MI func)


2010-12-08 02:08:21  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7484] :

	b2b_logic: B2B_RE_INVITE_CB - reINVITE callback



2010-12-07 21:57:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7483] :

	b2b_logic: define return values for b2b_logic callbacks



2010-12-07 21:12:15  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7482] :

	presence_callinfo: new module



2010-12-07 19:37:12  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7480] :

	textops: update README file for is_audio_on_hold() function



2010-12-07 14:01:13  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7475] :

	use readers-writers synchronization


2010-12-07 12:39:10  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7473] :

	- more docs updated


2010-12-07 12:14:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7471] :

	- docs updated


2010-12-06 23:17:09  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [7467] :

	Fix linked list management.

	Submitted by:	Kennard White, patch #3047314


2010-12-06 23:00:57  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [7466] :

	Initialize new_msg->msg_cb properly, or it could cause crash in the
	nathelper module later on.



2010-12-06 15:25:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7463] :

	- Adding Call-Info header to the list of known opensips headers.

	  Credits go to Ovidiu Sas
	  Closes patch 3123647


2010-12-03 17:03:30  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7461] :

	b2b_logic: callbacks restructuration

	 - generic callbacks instead of entity specific callbacks



2010-12-03 16:55:52  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7460] :

	An implementation of readers-writers synchronization mechanism


2010-12-03 15:11:46  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7459] :

	b2b_logic: masks for b2b_logic callbacks 



2010-12-03 14:49:49  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7457] :

	- fixed test on dialog state when using get_dialog_info() 
	  Credits go to Vallimamod Abdullah
	  Closes bug report 3095064


2010-12-03 14:36:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7454] :

	- fixed typos in log messages


2010-12-03 14:34:30  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7453] :

	-avoid table version check on DB drivers which do not support QUERY/SELECT ops (like whn using flatstore which is an INSERT only driver)


2010-12-02 18:41:27  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7451] :

	Added the possibility to replace to and from with different values for each branch (uac_replace_from and uac_replace_to functions)


2010-12-02 18:32:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7449] :

	bug fix: do not use same prepared statement for 2 different types of queries


2010-12-02 17:58:43  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7448] :

	textops: new function is_audio_on_hold()

	 - returns true if at least one 'audio' stream is on hold
	 - only 'audio' streams are checked



2010-12-02 16:45:54  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7447] :

	b2b_logic: redefining b2b_logic cb event types



2010-12-02 16:28:08  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7446] :

	b2b_logic: using proper cb event type for B2B_BYE callbacks



2010-12-02 16:17:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7445] :

	b2b_logic: adding the msg to the b2b_logic callback structure



2010-12-02 11:59:57  Anca Vamanu, <anca at opensips dot org> 
	* [7443] :

	- use the new ruri if set in top hiding


2010-12-01 21:10:40  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7442] :

	sdp parser: detect on hold media during sdp parsing



2010-11-30 22:03:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7439] :

	port from 1.6 branch (rev 7410):
	fixed vendor ID when searching radius AVP in radius replies



2010-11-30 19:42:11  Anca Vamanu, <anca at opensips dot org> 
	* [7438] :

	- added different callback events for bridging failures
	- some fixes


2010-11-30 12:21:54  Anca Vamanu, <anca at opensips dot org> 
	* [7437] :

	- fixed bug in terminate call function


2010-11-29 23:04:50  Anca Vamanu, <anca at opensips dot org> 
	* [7436] :

	- appied patch from Ovidiu Sas, new interface for callback function


2010-11-29 19:04:47  Anca Vamanu, <anca at opensips dot org> 
	* [7435] :

	- complete the last commit


2010-11-29 18:52:12  Anca Vamanu, <anca at opensips dot org> 
	* [7434] :

	- added MI terminate call command
	- fixed crash when 408 reply received twice for reInvite


2010-11-29 17:25:35  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7433] :

	b2b_logic: fix indentation



2010-11-29 15:59:53  Anca Vamanu, <anca at opensips dot org> 
	* [7432] :

	- fixed memory leak


2010-11-29 06:28:51  Di-Shi Sun <di-shi at transnexus dot com> 
	* [7431] :

	Added support to append destination network ID by different ways.


2010-11-28 00:29:06  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7429] :

	pua: reject new PUBLISH requests only if a 'content-type'
	     is defined for the event being processed



2010-11-28 00:18:06  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7428] :

	pua: adding "call-info" to the list of known events



2010-11-27 06:16:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7427] :

	presence: handle body only if a 'Content-Type' header is defined for the processed event

	 - save body from PUBLISH only if Content-Type is defined
	 - send body in NOTIFY only if Content-Type is defined



2010-11-27 02:18:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7426] :

	presence: fix extra headers presentity update



2010-11-26 18:28:48  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7425] :

	b2b_logic: populate b2bl_key_avp for calls initiated via the b2b_logic api



2010-11-25 16:40:08  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7424] :

	pua: define load_pua_api() for easier module api loading



2010-11-25 16:09:47  Anca Vamanu, <anca at opensips dot org> 
	* [7423] :

	- applied patch #3116646, update contact in database at sequential Subscribe (credits to Walter Doekes)


2010-11-25 15:55:15  Anca Vamanu, <anca at opensips dot org> 
	* [7422] :

	- applied patch #3106031,fixes crash if stat does not exist (credits Walter Doekes)


2010-11-25 14:48:55  Sergio Gutierrez <saguti at gmail dot com>$ 
	* [7421] :

	- Typo in module documentation. Credits go to Duane Larson who reported through mail list.


2010-11-25 14:39:04  Sergio Gutierrez <saguti at gmail dot com>$ 
	* [7417] :

	- Typo in module documentation. Credits go to Duane Larson who reported through mail list.



2010-11-25 13:27:24  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7416] :

	small fixes to validate_dialog() and fix_route_dialog()


2010-11-24 20:37:45  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7415] :

	b2b_logic: replace multiple 'if' with a 'switch'



2010-11-24 19:56:44  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7414] :

	b2b_logic: print the key for disconnected entities



2010-11-24 19:51:36  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7413] :

	b2b_logic: strict checking for callback event type



2010-11-24 19:47:46  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7412] :

	b2b_logic: using static strings for reply reasons



2010-11-24 19:09:35  Anca Vamanu, <anca at opensips dot org> 
	* [7411] :

	- fixed the case when the first stage of the bridging failes and another bridging is required


2010-11-23 18:21:48  Anca Vamanu, <anca at opensips dot org> 
	* [7409] :

	- fix - send ACK for 200Ok Invite reply retransmissions even if the dialog is terminated
	- extend the cases when B2B_REJECT b2b_logic callback is called


2010-11-23 11:45:06  Anca Vamanu, <anca at opensips dot org> 
	* [7408] :

	- 2 fixes:
		- b2b_entities: store last sdp sent in ACK to use it in 200OK retrasmissions
		- b2b_logic: b2b_bridge - if the first entity has already completed the first step of the bridging, continue from there insted of starting a new bridging cycle


2010-11-19 19:41:37  Anca Vamanu, <anca at opensips dot org> 
	* [7407] :

	- fix sending ACK when 200Ok is retransmitted


2010-11-19 11:21:38  Anca Vamanu, <anca at opensips dot org> 
	* [7406] :

	- fix crash


2010-11-19 00:52:12  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7404] :

	- added a new statistic to provide access to the opensips internal timestamp


2010-11-18 12:16:14  Anca Vamanu, <anca at opensips dot org> 
	* [7402] :

	- fixed params handling for b2b_init_request (wrong report of too few parameters and crash)


2010-11-18 07:45:09  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7401] :

	b2b_entities: debug probes updates



2010-11-17 22:16:07  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7400] :

	b2b_logic: mi fixes

	 - mi b2b_list: always print scenario_state
	 - mi b2b_bridge: now works in all client|server combinations



2010-11-17 22:12:53  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7399] :

	b2b_logic: removing body DBG logs



2010-11-17 17:59:50  Anca Vamanu, <anca at opensips dot org> 
	* [7398] :

	- fix - don't send FAKED_REPLY in script route


2010-11-17 17:50:12  Anca Vamanu, <anca at opensips dot org> 
	* [7397] :

	-fix: wrong sip_msg in reply_route for FAKED_REPLY


2010-11-17 17:24:55  Anca Vamanu, <anca at opensips dot org> 
	* [7396] :

	- updated the dialog state for server entity also


2010-11-17 16:49:47  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7395] :

	b2b_entities: fix CANCEL handling



2010-11-17 16:15:45  Anca Vamanu, <anca at opensips dot org> 
	* [7394] :

	- 2 fixes	- reset peer pointers at delete
				- don't unset the callback function - causing events not reported to the upper layer


2010-11-17 07:12:36  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7393] :

	b2b_entities: consistent loging while creating client/server entities



2010-11-17 07:08:14  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7392] :

	b2b_logic: set proper entity IDs for "top hiding" scenario

	 - set no 0 for the server[0] entity
	 - set no 1 for the client[0] entity
	 - re-organize some debug logs



2010-11-17 03:51:57  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7391] :

	b2b_entities: added a debug probe about tm notification cb



2010-11-17 00:27:03  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7390] :

	b2b_entities: enhancing a debug probe



2010-11-17 00:25:06  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7389] :

	b2b_logic: reorganizing the internal API for entity removal



2010-11-16 18:05:31  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7388] :

	b2b_logic: new consistent way of adding entities to a tuple



2010-11-16 17:38:52  Anca Vamanu, <anca at opensips dot org> 
	* [7387] :

	- fix - set relaied_branch before calling the callbacks (it was not working with dialog when no provisional reply was received)


2010-11-16 16:22:31  Anca Vamanu, <anca at opensips dot org> 
	* [7385] :

	- applied patch from Ovidiu Sas - restructure the way entities are stored (use arrays instead of lists), allow more servers in the same scenario instantiation


2010-11-16 15:08:28  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7384] :

	fix_route_dialog() function can now make up for any type of routing ( loose or strict )


2010-11-15 19:48:14  Anca Vamanu, <anca at opensips dot org> 
	* [7382] :

	- fixed crash at startup due to wrong module loading order


2010-11-15 17:13:36  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7381] :

	b2b_logic: some DBG log updates



2010-11-15 17:12:54  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7380] :

	b2b_entities: some DBG log updates



2010-11-15 16:25:52  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7379] :

	b2b_logic: minor doc fix

	- fix the html output for 'opensipsctl b2b_bridge' command



2010-11-15 16:17:17  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7378] :

	validate_dialog() can now handle all types of routing ( loose to loose, loose to strict, strict to loose and strict to strict )


2010-11-13 00:59:20  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7377] :

	b2b_logic: doc updates

	 - new modparam: b2bl_key_avp
	 - new function: b2b_bridge_request
	 - new mi function: b2b_list
	 - new api function: bridge_msg



2010-11-12 20:53:33  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7376] :

	b2b_logic: new cmd: b2b_bridge_request(pvar b2bl_key, pvar entity)

	 - b2b_bridge_request allows an incoming call to be bridged to one of
	   the particiants from an existing b2b call.
	    - the b2bl_key must be provided via a pvar in order to identify the
	      existing b2b call
	    - the entity (provided via a pvar) will identify the particiant to
	      be bridged (0 or 1)



2010-11-12 20:17:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7375] :

	b2b_logic: fix mi b2b_bridge command

	 - both flags are supported now



2010-11-12 12:44:05  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7374] :

	fixed bug recently introduced in after_strict() routing


2010-11-11 22:07:19  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7373] :

	b2b_logic: mi b2b_bridge flag fix

	 - if a flag is given, only '0' is accepted
	 - flag '1' is not supported for now



2010-11-11 20:48:30  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7372] :

	b2b_logic: new modparam: b2bl_key_avp

	 - b2bl_key_avp defines an avp that will hold the b2b logic key
	for the current b2b logic entity.
	 - the avp will be visible after invocation of b2b_init_request
	 - the avp will be visible in b2b_entities request/reply routes



2010-11-11 17:08:03  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7371] :

	fixed bug in dialog module, in saving leg information


2010-11-11 14:10:43  Anca Vamanu, <anca at opensips dot org> 
	* [7370] :

	- - added a new function in b2b_logic - b2bl_bridge_msg - that allows briding an initial INVITE with an existing dialog
	- a fix in b2b_entities when faked reply is received


2010-11-11 12:38:52  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7367] :

	- fixed bogus db handling (reset handler when closing connection)


2010-11-11 12:25:28  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7365] :

	- fixed bogus db_close at destroy time 


2010-11-10 22:13:28  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7363] :

	- fixed bug when URI contains parameters


2010-11-10 20:22:49  Anca Vamanu, <anca at opensips dot org> 
	* [7362] :

	- some fixes


2010-11-10 14:02:14  Anca Vamanu, <anca at opensips dot org> 
	* [7360] :

	- fixed crash


2010-11-09 17:04:28  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7358] :

	Added 2 new exported functions to RR module. get_remote_target() that returns the call endpoint, and get_route_set() that returns an array of the URIs contained in Route headers. Dialog module now uses these 2 function to succesfully validate a message, no matter what type of routing ( strict vs loose ) was done,


2010-11-09 14:37:48  Anca Vamanu, <anca at opensips dot org> 
	* [7357] :

	- some small fixes


2010-11-08 14:24:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7356] :

	fixed probing condition


2010-11-08 14:03:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7354] :

	- more checks on connections


2010-11-07 19:09:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7353] :

	b2b_logic: print the key in the error log in case of a parsing failure



2010-11-04 11:53:14  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7352] :

	- fixed bug in len calculation
	  Credits go to Kennard White


2010-11-04 11:32:13  Anca Vamanu, <anca at opensips dot org> 
	* [7350] :

	- quite down sl and tm module when attempting to send a reply for ACK


2010-11-03 19:29:40  Anca Vamanu, <anca at opensips dot org> 
	* [7349] :

	- fixed issue with UPDATE send in provisional state by the UAC
	- fixed sending ACK for any 200OK retransmission


2010-11-03 18:52:46  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7348] :

	parser: adding "call-info" and "line-seize" to the list of known events



2010-11-03 14:42:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7346] :

	bug fixed : if nonce reused, return "stale" indicater in the challenge.
	Credits for report go to Kennard White 


2010-11-03 13:03:06  Anca Vamanu, <anca at opensips dot org> 
	* [7344] :

	- fixed - strip uri from header if it contains '<' '>', fixed interpretation of the scenario to prevent atempting to bridge one entity with itself.


2010-11-02 20:56:05  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7343] :

	b2b_logic: print peer key for b2bl entities for b2b_list



2010-11-02 05:55:11  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7342] :

	b2b_logic: new mi function: mi_b2b_list

	 - allows inspection of tuples via the mi interface



2010-11-01 19:45:44  Anca Vamanu, <anca at opensips dot org> 
	* [7341] :

	- fixed handlign of faked negative replies


2010-11-01 17:36:37  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7340] :

	b2b_logic: README file regenerated



2010-11-01 17:14:58  Anca Vamanu, <anca at opensips dot org> 
	* [7339] :

	- uploaded the right file


2010-11-01 15:56:51  Anca Vamanu, <anca at opensips dot org> 
	* [7338] :

	- added extra file for devel documentation, removed file added by mistake when the module was added


2010-10-28 12:47:31  Anca Vamanu, <anca at opensips dot org> 
	* [7335] :

	- fix - update contact uri pointer in message structure


2010-10-27 15:00:43  Anca Vamanu, <anca at opensips dot org> 
	* [7333] :

	- added the possibility to terminate a dialog from another module


2010-10-27 13:33:12  Anca Vamanu, <anca at opensips dot org> 
	* [7332] :

	- updated documentation to include the info about the new feature - b2b_logic offers functions to be used by other modules


2010-10-26 21:59:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7331] :

	presence: new callback: build_empty_pres_info

	 - build_empty_pres_info callback allows a module
	to provide specific dummy information for a
	specific event when no information is available
	in the presentity table.



2010-10-26 19:54:10  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7330] :

	presence: the list of extra headers is provided by each event
	          during the event registration process

	 - the list of headers must be provided as a <null> terminated list
	 - example:
	str extra_hdrs[] = {
	        str_init("Extra_header_1"),
	        str_init("Extra_header_2"),
	        {NULL,0},
	};



2010-10-26 18:28:35  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7329] :

	presence: save the new 'mandatory_body' flag



2010-10-26 17:39:43  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7328] :

	Added a new pseudo variable called 'bavp', that can have different values for each branch


2010-10-26 17:12:57  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7327] :

	presence: new 'mandatory_body' flag

	 - distinguish between presence events that requires or not a body



2010-10-26 13:32:53  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7325] :

	Added a new exported function to the dialog module, fix_route_dialog(), which forces an in-dialog SIP message to contain the ruri, route headers and dst_uri, as specified by the internal data of the dialog it belongs to. The function will prevent the existence of bogus injected in-dialog requests ( like malicious BYEs )



2010-10-26 10:52:40  Anca Vamanu, <anca at opensips dot org> 
	* [7324] :

	- add new file (forgot to add it in the last commit)


2010-10-25 18:01:53  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7323] :

	opensipsctlrc: add b2b to the list of EXTRA_MODULES

	 - allow b2b tables to be installed via opensipsdbctl script



2010-10-25 17:34:14  Anca Vamanu, <anca at opensips dot org> 
	* [7322] :

	- New feature - b2b_logic itself offer library functions to other modules that can control it.  


2010-10-25 17:22:13  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7321] :

	load_balance can now also receive pseudo-variables resource


2010-10-25 16:21:39  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7320] :

	proper cleanup in case of error - reset the global transaction pointer if we fail to creat the transaction

	Credits go to Kennard White


2010-10-22 19:49:14  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7319] :

	presence: support for extra headers in NOTIFY

	 - extra headers received in PUBLISH requests can be
	stored and sent to the subscrber via NOTIFY requests



2010-10-22 12:53:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7317] :

	- fixed passing the TO-TAG param if already provided via t_uac_dlg


2010-10-20 20:40:16  Anca Vamanu, <anca at opensips dot org> 
	* [7315] :

	- fixed wrong key reference


2010-10-20 20:37:25  Anca Vamanu, <anca at opensips dot org> 
	* [7314] :

	-took out extra character in last commit


2010-10-20 20:31:16  Anca Vamanu, <anca at opensips dot org> 
	* [7312] :

	- completed the documentation ( -S option), thanks to Norman Brandinger


2010-10-19 17:41:23  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7311] :

	upgraded the codec_ functions in the textops module, so than now they can also receive $avp and $var as parameters


2010-10-19 11:59:04  Anca Vamanu, <anca at opensips dot org> 
	* [7308] :

	- fix - omission in the latest fix


2010-10-18 16:05:51  Anca Vamanu, <anca at opensips dot org> 
	* [7306] :

	- small fix in send_request


2010-10-18 12:54:54  Anca Vamanu, <anca at opensips dot org> 
	* [7304] :

	- fixed omission in the list of methods allowed in early dialog state


2010-10-18 12:02:34  Marc Leurent <lftsy at leurent dot eu> 
	* [7303] :

	* Mon Oct 18 2010 Marc Leurent <marc.leurent@vtx-telecom.ch>
	- Add missing dependencies pcre-devel for compilation
	- Xlog Module has been merged into core.


2010-10-15 19:32:28  Anca Vamanu, <anca at opensips dot org> 
	* [7300] :

	- fixes: - don't delete the logic record if sending request or reply fails (might cause missing BYE), fixes for UPDATE sent by the caller



2010-10-15 18:07:13  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7298] :

- statistic functions take as param a VOID* instead of UNSIGNED SHORT


2010-10-15 17:43:29  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7296] :

	parser: check that 'Content-Length' header is parsed before returning the length



2010-10-15 16:14:56  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7295] :

	Added a new pseudovariable called 'env', that provides access to environment variables.


2010-10-15 15:33:16  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7293] :

	- rand_event() may take as optional param (with vars) the probability (this param will override the global probability (set via set_prob).


2010-10-15 15:04:44  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7292] :

	added a new core function, construct_uri which builds a sip uri based on the protocol, username, domain, port and extra params that it receives


2010-10-14 17:12:44  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7291] :

	Added a new pseudovariable called 'argv', that allows reading arguments specified with '-o' option in command line


2010-10-12 18:41:39  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7289] :

	- fixed bug in get_source_group() function (permission module)



2010-10-12 18:33:40  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7287] :

	modules/rr: README file regenerated



2010-10-12 18:25:57  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7286] :

	modules/rr: new param 'enable_socket_mismatch_warning'

	closes patch 3084000: rr: new module parameter: enable_socket_mismatch_warning



2010-10-12 14:13:13  Anca Vamanu, <anca at opensips dot org> 
	* [7284] :

	- fixed header name search (space after hcolon not compulsory)


2010-10-08 19:14:12  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7282] :

	Enhancement to record_route_preset functions to accept a second Record-Route header to be preset via a second argument.

	Patch from Ovidiu Sas.
	Close patch 3081570


2010-10-08 19:03:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7280] :

	- ERR -> DBG if credentials are not properly filled


2010-10-08 12:06:47  Anca Vamanu, <anca at opensips dot org> 
	* [7279] :

	- added the possibility to send a reply with body from the script  ( "t_reply_with_body" function)


2010-10-07 21:11:51  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7277] :

	- more LCR cleanup


2010-10-07 21:04:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7276] :

	- lcr stuff removed


2010-10-07 20:45:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7274] :

	- added missing tables
	  Thaks to Ovidiu Sas to report it 


2010-10-07 20:32:56  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7273] :

	lcr module: removed



2010-10-07 20:23:45  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7272] :

	identity: update ignore list files



2010-10-07 20:23:00  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7271] :

	memcached: update ignore list files



2010-10-07 20:22:04  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7270] :

	python: update ignore list files



2010-10-07 20:19:25  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7269] :

	db_http: update ignore list files



2010-10-07 20:18:07  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7268] :

	aaa_radius: update ignore list files



2010-10-07 20:16:48  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7267] :

	ldap: update ignore list files



2010-10-07 20:14:57  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7266] :

	json: update ignore list files



2010-10-07 20:12:59  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7265] :

	h350: update ignore list files



2010-10-07 18:27:23  Anca Vamanu, <anca at opensips dot org> 
	* [7264] :

	- fixed body processing for 'dialog' event ( also applied patch from Vallimamod ABDULLAH)
	- fixed flags operation in presence 


2010-10-07 13:39:24  Anca Vamanu, <anca at opensips dot org> 
	* [7261] :

	- fixed state and version - now the state is always partial, fix the situation with two simultaneous calls


2010-10-06 18:44:21  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7258] :

	- some check for extra debugging


2010-10-06 18:42:49  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7257] :

	- more explanations in ACC db schema


2010-10-06 18:28:11  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7254] :

	- avoid running RESPONSE_IN callbacks from an INVITE transaction when the reply of the CANCEL (to that INVITE) is received


2010-10-06 18:23:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7252] :

	- dlg vars return NULL and not error if there is no dialog in the current context


2010-10-06 18:19:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7250] :

	- docs updated
	- probing fixed - avoid probing until data is loaded


2010-10-06 18:12:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7249] :

	- fix_nated_contact() may take as optional param a list of URI params to be added to Contact URI


2010-10-06 18:03:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7248] :

	- if next_branches() returns true, returns 1 if other branches are still pending and return 2 if no other branches are left for future processing - shortly, if 2: this is the last branch, if 1: other will follow


2010-10-04 18:49:58  Anca Vamanu, <anca at opensips dot org> 
	* [7247] :

	- fixed BYE not sent on the other side for 481 reply for reInvite and BYe received when state connected, but not established


2010-10-04 16:43:55  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7245] :

	t_replicate can now also receive pseudo-variables arguments


2010-09-30 14:03:06  Anca Vamanu, <anca at opensips dot org> 
	* [7244] :

	- fixed reInvite handling


2010-09-28 13:49:54  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7243] :

	moved time recurrence functions in core


2010-09-27 17:47:04  Anca Vamanu, <anca at opensips dot org> 
	* [7242] :

	- fixed - complete FAKED_REPLY handling


2010-09-27 16:52:23  Anca Vamanu, <anca at opensips dot org> 
	* [7241] :

	- fixed bug - deleting record when negative reply is received for reInvite


2010-09-27 16:22:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7239] :

	- added support for NAPTR,SRV and multiple IPs when GWs are defined by names


2010-09-27 13:56:49  Anca Vamanu, <anca at opensips dot org> 
	* [7237] :

	- dialog event - empty dialog node body when no record if found also in no fallback2db (applied patch from Ovidiu Sas)


2010-09-27 12:43:59  Anca Vamanu, <anca at opensips dot org> 
	* [7235] :

	- allow integers(not only short) as dpid in dp_translate and mi function (suggested in patch #3075732 Paul Wise)


2010-09-23 19:58:35  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7233] :

	nathelper: obsolete flag 's' removed



2010-09-23 18:13:16  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7232] :

	nathelper: removing obsolete force_rtp_proxy function

	 - force_rtp_proxy is obsolete by rtpproxy_offer/rtpproxy_answer



2010-09-22 23:46:15  Iñaki Baz Castillo <ibc at aliax dot net> 
	* [7231] :

	- regex module: Fixed memory leak in pcre_match().
	  Backported from Kamailio 3.0 (credits to marius zbihlei)
	  http://git.sip-router.org/cgi-bin/gitweb.cgi/sip-router/?a=commit;h=61f4d7f12723c4a3d989d37a414433e5ed71abff


2010-09-22 14:01:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7228] :

	- fixed asyc handler for mi_datagram module - the t_uac_dlg function was never returning a reply as some internal sockets were not properly shared (inherited) at startup.
	  Reported and tested by Vallimamod Abdullah
	  Closes bug 3071925


2010-09-22 13:20:50  Anca Vamanu, <anca at opensips dot org> 
	* [7227] :

	- fixed some problems in handling UPDATE method


2010-09-22 12:48:44  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7225] :

	applied patch #3069228 - credits go to Kennard White
	added more error information to avpops 'raw_query' function


2010-09-21 18:55:40  Anca Vamanu, <anca at opensips dot org> 
	* [7224] :

	- fixed not forwarding replies for INFO and UPDATE
	- memory leak - tm transactions still referenced


2010-09-21 18:21:10  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7222] :

	Removing nathelper restriction for forcing rtp only for INVITE type SIP requests.
	UPDATE is a valid SIP request that can update the SDP.

	 - reported by Daniel Goepp <dan@goepp.net>



2010-09-21 16:19:25  Anca Vamanu, <anca at opensips dot org> 
	* [7220] :

	- fixed - do not report error when select returns EINTR


2010-09-21 13:50:15  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7219] :

	- better comment
	  Credits go to Stanislaw Pitucha


2010-09-21 12:15:27  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7217] :

	fixed bogus int->str conversion of AVPs with negativ integers.
	Reported by Essobi of IRC channel


2010-09-20 18:19:43  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7215] :

	applied patch #3062931 - credits go to Kennard White
	skips grants in case opensips ro and rw database user is root


2010-09-17 15:18:10  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7212] :

	replaced UINT4 with uint32_t in rad_avp_add() function
	fixed rc_auth() error checking


2010-09-15 13:19:54  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7209] :

	more WARN -> INFO


2010-09-15 13:14:27  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7207] :

	- WARN switched to INFO


2010-09-13 19:36:07  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7204] :

	- fixed crash if port is null pointer


2010-09-13 19:16:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7201] :

	- fixed bug in building ACK for UAC transactions


2010-09-13 18:39:03  Anca Vamanu, <anca at opensips dot org> 
	* [7200] :

	- fixed sending reply twice for Publish ( reported by Kennard White )


2010-09-13 10:37:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7199] :

	- one more deadlock fixed in callback sync (right commit)


2010-09-13 10:35:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7198] :

	- revert previous commit - wrong file


2010-09-13 10:28:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7197] :

	- one more deadlock fixed in callback sync



2010-09-10 12:56:28  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7195] :

	fixes a form_result() function. This function does not work if a buffer (var_str buff) has a byte with high-order bit (in other words, a character with a code greater than 127).

	Credits go to John Khvatov


2010-09-09 20:46:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7193] :

	fixed compiling on BSD - the header files may in different dirs and the DB lib has a different name.

	Thanks to Erik Dekkers for BSD support


2010-09-09 16:11:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7192] :

	- fixed deadlock introduced with last commit on locked callbacks


2010-09-08 14:13:09  Anca Vamanu, <anca at opensips dot org> 
	* [7190] :

	- fixed double free in an error case


2010-09-07 13:51:46  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7189] :

	fixed bug when calling expire dlg callback with null message


2010-09-06 12:57:53  Anca Vamanu, <anca at opensips dot org> 
	* [7188] :

	- applied patch #3058434 from Kennard White - a module parameter that enables including closed status body in Notify when no published info is found for the user
	- fixed wrong order of operations when cleaning expired published


2010-09-03 19:31:37  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7186] :

	pua_dialoginfo/README: fix example for callee_spec_param



2010-09-03 17:34:03  Anca Vamanu, <anca at opensips dot org> 
	* [7185] :

	- added a way to control the duration of a call - 'max duration' module parameter


2010-09-03 14:25:42  Anca Vamanu, <anca at opensips dot org> 
	* [7184] :

	- fixed memory leak


2010-09-02 13:31:27  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7183] :

	Added posibility to set destination domain and destination port from script
	You can now set $dd and $dp


2010-09-02 09:07:10  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7181] :

	fixed race condition between TM callbacks when comes to changing the original SIP requests (stored in shm, in transaction)


2010-09-01 17:15:36  Anca Vamanu, <anca at opensips dot org> 
	* [7179] :

	- fix: update contact in database for subscribe dialogs


2010-09-01 16:03:25  Anca Vamanu, <anca at opensips dot org> 
	* [7177] :

	- fixed a bug intreoduced in last commit


2010-09-01 15:51:32  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7176] :

	fixed wrong check for IPv6


2010-08-31 13:41:14  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7175] :

	fixed 'append_fromtag' RR param  check if 'force_dialog' param is enabled


2010-08-31 12:59:03  Anca Vamanu, <anca at opensips dot org> 
	* [7173] :

	- 2 fixes:
		- reply to both the parties if they send BYE in almost the same time
		- include Max-Forwards header in all the requests that require it (Invite, Update, Prack)


2010-08-30 19:21:49  Anca Vamanu, <anca at opensips dot org> 
	* [7171] :

	- do not propagate full state notifies


2010-08-30 18:12:09  Anca Vamanu, <anca at opensips dot org> 
	* [7169] :

	- fixed a problem in BLA - if received a otify without any dialog received, don't send Notify to the others in the BLA group


2010-08-27 17:54:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7166] :

	- fixed stupid bug in building the destination bitmaks - affecting runs on 64 bits with more than 32 destinations
	  Thanks to Dimitri for report


2010-08-27 17:39:52  Anca Vamanu, <anca at opensips dot org> 
	* [7164] :

	- fix: detecting retransmissions and handle them right


2010-08-27 00:38:38  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [7160] :

	Fixed small bug in Call Control documentation

	Reported by tompaw


2010-08-24 19:10:50  Anca Vamanu, <anca at opensips dot org> 
	* [7156] :

	- added a module parameter that disables a BLA Polycom specific behavior - bla_fix_remote_target


2010-08-24 13:33:44  Anca Vamanu, <anca at opensips dot org> 
	* [7154] :

	- cleanup when deleting a entities record


2010-08-24 12:55:16  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7152] :

	- added auto detection for pcre installation


2010-08-23 16:43:10  Anca Vamanu, <anca at opensips dot org> 
	* [7150] :

	- improved the BLA logic to propagate info to phones


2010-08-23 16:38:50  Anca Vamanu, <anca at opensips dot org> 
	* [7149] :

	- fixed copy paste error in queue implementation ( caused segmentation fault )
	- fixed bug in send_subscribe


2010-08-23 12:16:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7147] :

	- fixed ugly bug in reseting the parsed fields when failure route called several times


2010-08-20 17:32:12  Anca Vamanu, <anca at opensips dot org> 
	* [7146] :

	- fixed some problems with db persistency


2010-08-19 16:51:22  Anca Vamanu, <anca at opensips dot org> 
	* [7145] :

	- applied patches from Alex Hermann : 
		- fixed bug in calculating length
		- implemented queues for pending publishes


2010-08-19 14:32:40  Andrei Dragus <adragus at opensips dot org> 
	* [7144] :

	codec operations are not done if not necessary


2010-08-19 13:40:14  Andrei Dragus <adragus at opensips dot org> 
	* [7143] :

	Fixed error checking


2010-08-18 18:21:13  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7142] :

	- added a new fixup func for get_source_group() to check the db_url
	  reported by Andrew Pogrebennyk


2010-08-18 16:33:48  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7141] :

	fixed improper exiting with error in restore_uri function when dialog is not found


2010-08-18 16:16:13  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7140] :

	Added bitwise operations support for string variables. 
	To be used with the new IP transformations in binary format.


2010-08-17 17:06:00  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7139] :

	ACC linked with Dialog to generate CDRs
	Changed database schema


2010-08-16 17:06:00  Anca Vamanu, <anca at opensips dot org> 
	* [7137] :

	- fixed not checking if create_dlg exits with error


2010-08-13 17:36:46  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7135] :

	- fixed missing memcpy in setting rules attrs (related to yesterday work)


2010-08-13 11:47:24  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7134] :

	Added 3 new transformations : IP, SDP and CSV


2010-08-12 22:10:46  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7133] :

	- DB struct updated to reflect the latest changes


2010-08-12 22:04:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7132] :

	- added attributes for rules (they are exported via AVPs)
	- added a new AVP to export the ID of the matched RULE (for accouting purposes)


2010-08-12 19:01:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7131] :

	 - added t_add_hdrs() function to add a custom header to all internally generated requests from a transaction (cancels, acks) 


2010-08-12 18:38:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7129] :

	- new "disable_503_translation" global parameter do disable the 503 -> 500 reply translation.
	 By default the "disable_503_translation" is off (translation is done)



2010-08-11 11:19:25  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7128] :

	Dialog module no longer mandatory for nathelper module to load.


2010-08-10 22:36:09  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [7127] :

	Reorganizing the core SDP parser:
	 - sendrecv and ptime are now session attributes
	 - parse connection and origin IP
	 - sdp helper logs are now configurable
	 - parse rtcp attributes



2010-08-10 19:03:53  Anca Vamanu, <anca at opensips dot org> 
	* [7126] :

	- modified the implementation - fixed deadlock situation - replaced the publish lock with storing the send publish request and sending it on the tm callback when the reply is received 


2010-08-09 15:01:22  Anca Vamanu, <anca at opensips dot org> 
	* [7124] :

	- included RAck header in generated PRACK request


2010-08-08 14:46:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7123] :

	- fixed missing semicolon


2010-08-06 16:30:34  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7120] :

	Fix for the case when dialog is created after uac_replace functions


2010-08-06 06:07:50  Di-Shi Sun <di-shi at transnexus dot com> 
	* [7119] :

	1. Removed loading xlog module from sample configuration.
	2. Updated release notes.


2010-08-05 15:36:33  Anca Vamanu, <anca at opensips dot org> 
	* [7116] :

	- fix in BLA - send Notify with partial state ( until now it sent Notifies with full state everytime) 


2010-08-05 15:09:36  Anca Vamanu, <anca at opensips dot org> 
	* [7115] :

	- fixed crash due to callback parameter, reported by Yaniv Vaknin


2010-08-04 23:16:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7113] :

	* Make top-level Makefile targets more orthogonal
	* Add top-level Makefile target to install just the app
	* Add support for variable OPENSIPS_RELEASE to override the RELEASE string
	* Restructure debian packaging to be for-loop based
	* Add variable to allow subset of debian packages to be built

	Closes patch 3039489
	Credits goto Kennard White


2010-08-04 23:03:11  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7111] :

	Fixed bug in parse_uri() that prevents parsing of the r2 parameter (used by the rr module). It is a missing break statement.

	Closes patch 3039483
	Credits goto Kennard White 


2010-08-03 18:46:40  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7110] :

	Linked nathelper module with the dialog module so that now only function ( engage_rtp_proxy )
	has to be called on the initial invite, and the changes on the sequential requests and
	replies are done automatically.



2010-08-03 17:35:41  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7109] :

	Fixed missing include directive


2010-08-03 17:28:56  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7108] :

	Improved uac module implementation to benefit from dialog module functionality


2010-08-03 17:20:03  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7107] :

	Added priority to RR callback functions


2010-08-02 04:15:15  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7100] :

	- fixed rule creation when subst rule is not defined


2010-08-02 04:05:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7098] :

	- fixed previous fix :)



2010-08-02 04:03:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7097] :

	- fixed error message during failed startup


2010-08-02 01:19:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7090] :

	- compile warning fixed


2010-08-02 00:10:09  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7086] :

	-type of RADIUS AVP detected when AVP looked into dictionary
	-if type is IPADDR or INTEGER and value is received as string, do the proper conversion

	based on an patch submitted by Matt Lehner
	Closes patch 3013565


2010-08-02 00:07:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7085] :

	- type field added to aaa_map structure


2010-08-01 23:39:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7084] :

	When rewriting the SDP of an ACK rtpproxy_answer() retrieves the wrong port from rtpproxy.

	This is reproducible by handling SDP offered in a 200 Ok response with rtpproxy_offer() and then processing the answering SDP in an ACK with rtpproxy_answer() - the result is that the same port gets written into the ACK's SDP as was written into the Ok's SDP. In short, the 200 Ok is being handled correctly when it contain an SDP offer since the to/from tag are swapped inside force_rtp_proxy() before getting passed along to rtpproxy. The swap is critical as it provides consistent results when processing SDP offered in INVITE requests and Ok responses during re-invites within the same dialog. But the complimentary swapping is not being done for SDP answers contained in ACKs.

	Closes patch 3019749
	Credits go to John Riordan  


2010-08-01 23:27:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7081] :

	r6819 added support of RtpProxy auto-bridging feature. If RTPProxy support it, the feature is enabled by default.
	With network topology where RTP network is distinct from SIP network, this feature completely fail.

	The attached patch add a new "rttproxy_autobridge" parameter that allow enabling the auto-bridging feature but let it disabled by default to be BC.

	Closes patch 3022364


2010-08-01 23:17:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7079] :

	-new pvar "path" added to allow reading of path_vec. This information was only available (via $branch(path) ) if branches exists.

	Closes path 3034685


2010-08-01 23:12:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7077] :

	- Copy the logic of rr::record_route() to path::add_path()
	- Add a new parameter "enable_double_path" that is enabled by default.

	Without this feature, handling of initial transaction on a proxy need a bunch of workaround and force_send_socket() to have network / protocol bridging working.

	Closes patch #3035872


2010-08-01 22:40:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7075] :

	- fixed tests for filling default values
	  Closes bug 2994156


2010-08-01 22:28:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7073] :

	-added SYSLOG param to osipsconsolerc
	-SYSLOG has default val 1 (logging to syslog)

	Closes bug 2994157


2010-08-01 22:05:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7071] :

	- pvars $bf and $bF were put back (removed by revision 5764) as there is no other way to bulk access (as mask) the branch flags for current branch.
	 Closes bug report 3023092


2010-08-01 20:49:55  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7068] :

	- fixed resetting of the prepared statement attachement to DB connection - if generating the prepare statement query fails or if fetching the DB result also fails, reset the prepares statment from the current DB conn.


2010-07-30 16:50:14  Andrei Dragus <adragus at opensips dot org> 
	* [7067] :

	fixed logging


2010-07-30 16:48:39  Andrei Dragus <adragus at opensips dot org> 
	* [7066] :

	Fixed static variables


2010-07-30 16:42:10  Andrei Dragus <adragus at opensips dot org> 
	* [7065] :

	Another fix, not final yet


2010-07-29 19:43:01  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7063] :

	For accounting purposes, I needed to know which gateway a request was sent to. Since there was already an AVP inside the drouting module that stored this information, I just modified the code to allow this AVP to be accessed from inside the routing scripts. There is a new module parameter called id_avp to configure where it will be stored.

	The AVP will only contain a value between the time do_routing/next_gw is called and the request is sent to the next hop.

	Closes patch 3034371
	Credits go to Matt Lehner




2010-07-29 18:22:23  Anca Vamanu, <anca at opensips dot org> 
	* [7062] :

	- added support for persistent database storage


2010-07-29 16:29:55  Andrei Dragus <adragus at opensips dot org> 
	* [7061] :

	Fixed crashes in codec operations on branch routes


2010-07-29 16:28:52  Andrei Dragus <adragus at opensips dot org> 
	* [7060] :

	added flag needed for codec manipulation


2010-07-23 18:08:09  Dan Pascu <dan at ag-projects dot com> 
	* [7056] :

	Fixed wrong password field being selected in the database due to typo in the code

2010-07-22 20:33:20  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7054] :

	applied patch 3033111 - proper check of the return code of parse_to() function.

	Closese bug 3033111
	Credits go to Stanislaw Pitucha 


2010-07-22 19:15:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7052] :

	when force_active is true, the pxml_db is not opened; When force_active is true, the db is not needed and the code already avoids touching the db. This patch adds the same functionality into the init code (both mod init and child init). When force_active is True, the db_url parameter can be left unspecified.

	Closes patch 3028767
	Credits go to Kennard White


2010-07-22 19:06:01  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7051] :

	- new top route callbacks added (extension for script callbacks) - this is needed to fix some complex issue with codec related lumps in Request, Branch and Failure Route - work on progress


2010-07-22 18:07:46  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7049] :

	- fixed return code of internal function 
	  Credits go to Kennard White


2010-07-22 17:07:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7046] :

	- fixed proper val type for inserting the AVP timeout
	  Closes bug 3016652
	  Credits goto Artem Osmerkin


2010-07-22 16:54:01  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7044] :

	parse_to doesn't cleanup the destination structure properly (the parameter list), causing some modules to crash (dialoginfo for example)
	Instead of adding yet another memset, I removed all of them and added proper cleaning to parse_to itself.

	Closes patch 3033002
	Credits go to Stanislaw Pitucha


2010-07-22 16:48:21  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7042] :

	- fixed wrong flag in save() params


2010-07-22 16:44:51  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7041] :

	- fixed some include directives


2010-07-22 15:03:58  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7039] :

	shell specific syntax fixed


2010-07-20 17:33:48  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7038] :

	Exposed T pointer to on_req tm callbacks


2010-07-20 14:34:06  Anca Vamanu, <anca at opensips dot org> 
	* [7036] :

	- fixed bug when a new request is received before the previous is replies


2010-07-19 17:44:30  Anca Vamanu, <anca at opensips dot org> 
	* [7034] :

	- fixed wrong check


2010-07-19 17:04:46  Anca Vamanu, <anca at opensips dot org> 
	* [7033] :

	- added the possibility to specify To and From display names when starting a new dialog from the server and the possiblity to specify a RURI different from To uri


2010-07-15 21:18:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7030] :

	- bug fixed - check first for the presence of the CT-len header


2010-07-15 17:06:15  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [7028] :

	- added a check for the 'SIP-AVP' dictionary entry



2010-07-13 13:20:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7021] :

	- fixed case sensitiveness - be unsensitive when parsing SIP headers
	  Reported by Ján ONDREJ 


2010-07-13 11:53:05  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7019] :

	- fixed double free of SQL query result.
	  Closes bug 3003968
	  Credits go to Walter Doekes 


2010-07-13 11:31:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7018] :

	- fixed the MSG ids of the requests in FAILURE ROUTE - the old way of generating IDs could lead to ID overlapping and to structure reusage....
	 Related to bug ID 3028338


2010-07-13 11:01:04  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7016] :

	- avoid crashes of codec related functions in failure route due FAKE REPLIES (internally generated replies).
	  Reported by Thomas Gelf


2010-07-13 10:05:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7014] :

	- aliases_db does not provide the use_domain param anymore


2010-07-11 11:38:07  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7012] :

	fixed PVAL type in set operation


2010-07-11 11:10:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7011] :

	- fixed number of params in definition of get_source_group() - related to fix 7009
	  Credits to go Andrew Pogrebennyk


2010-07-09 20:56:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7010] :

	- docs updated


2010-07-09 20:51:10  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7009] :

	function get_source_group() returns the group via a pvar (function param) instead of return code - the bug was that the group may be 0 and a return code 0 means breaking the script execution.



2010-07-09 19:29:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7007] :

	- fixed ugly bug in overwritting the "expire" param in the contact headers - this is a critical bug as it may affect the registration time (and de-registration) when the expired val is passed via contact header and there are other params also present.


2010-07-09 12:04:30  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7006] :

	Added new files

2010-07-09 11:45:08  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7005] :

	Moved xlog module implementation to core

2010-07-09 11:25:03  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7004] :

	- Added a new pseudovariable called 'stat', that allows reading and resetting statistics values from the script


2010-07-09 11:09:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7002] :

	- fixed bug in updating stats about number of registered users
	  Reported by mayamatakeshi on users mailing list


2010-07-09 10:26:16  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [7001] :

	- fixed several issues with DB loading


2010-07-07 09:20:30  Di-Shi Sun <di-shi at transnexus dot com> 
	* [7000] :

	Changed OSP TCP port from 1080 to 5045.


2010-07-06 23:35:12  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6998] :

	- new crc32 transformation added
	  Credits go to Eric Tamme.


2010-07-06 23:28:12  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6997] :

	- r6818 introduced a memory leak : allocation done by hostent_cpy() is not freed
	- Credits go to Christophe Sollet
	- closes bug id 3025540



2010-07-06 23:18:06  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6996] :

	- increased subversion


2010-07-06 20:35:10  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6993] :

	- docs updated - removed the "detect_hold" function which does not exist


2010-07-06 15:14:52  Anca Vamanu, <anca at opensips dot org> 
	* [6991] :

	- fixed crash if attempting to send a reply for an old transaction 


2010-07-01 20:07:06  Iñaki Baz Castillo <ibc at aliax dot net> 
	* [6988] :

	- Added a typo in pcre_match_group documentation.


2010-07-01 19:16:56  Anca Vamanu, <anca at opensips dot org> 
	* [6986] :

	- fixed some problems related to retransmissions 


2010-06-25 18:12:55  Anca Vamanu, <anca at opensips dot org> 
	* [6985] :

	- fixed segmentation fault at startup


2010-06-23 11:10:53  Anca Vamanu, <anca at opensips dot org> 
	* [6983] :

	- fixed crash at debug message


2010-06-22 17:17:30  Anca Vamanu, <anca at opensips dot org> 
	* [6981] :

	- updated documentation, mentioned that t_newtran() MUST not be called from the script on the INVITE on which you call b2b_init_request


2010-06-21 15:10:51  Anca Vamanu, <anca at opensips dot org> 
	* [6979] :

	- fixed memory leak in presence when used with mix dialog presence config


2010-06-21 12:28:24  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6978] :

	- one more == versus = fix


2010-06-21 12:23:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6975] :

	- fixed shell tests - use proper operators for string operands.
	  Reported by Daniel Goepp


2010-06-21 12:02:11  Anca Vamanu, <anca at opensips dot org> 
	* [6973] :

	- fixed some tm transactions left in memory
	- added some debug info messages


2010-06-18 18:12:54  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6969] :

	Fix SDP mangling for unsupported streams. A bug was introduced in r6812 that
	prevented the original c line being added to the unsupported streams, this
	fixes it.



2010-06-17 12:35:35  Anca Vamanu, <anca at opensips dot org> 
	* [6967] :

	- fixed memory leak


2010-06-16 19:07:09  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6964] :

	- fixed lookup and parsing of Session-Expires and Min-SE headers
	  Reported by Dmitry Kirillov


2010-06-16 13:42:52  Anca Vamanu, <anca at opensips dot org> 
	* [6962] :

	- fixed bug - mark in tm module that the transaction is used to prevent tm deleting it too early


2010-06-15 19:59:27  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6959] :

	- fixed operator precedence ( ! and &&)
	  Credits go to Kennard White


2010-06-15 12:22:44  Anca Vamanu, <anca at opensips dot org> 
	* [6957] :

	- updated the documentation - removed the known limitations sections as they are fixed


2010-06-15 12:12:41  Anca Vamanu, <anca at opensips dot org> 
	* [6955] :

	- update cseq on sending Subscribe rather then wen receiving the reply to avoid races between presence and pua


2010-06-14 15:53:51  Anca Vamanu, <anca at opensips dot org> 
	* [6953] :

	- fix for the procesing with negative replies without a to tag


2010-06-14 11:07:14  Anca Vamanu, <anca at opensips dot org> 
	* [6951] :

	- fixes in RLS, credits to Juha Heinanen
		- removed extra space before start parameter
		- fixed db schema - increased length for content_type column


2010-06-10 18:50:43  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6949] :

	- fixed line wrapping to make happy the new sh versions
	  Reported by Daniel Goepp 


2010-06-10 18:08:14  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6948] :

	- fixed segfaults when the dialplan record has some empty fields
	  reported by Sven Schulz 


2010-06-08 14:01:56  Anca Vamanu, <anca at opensips dot org> 
	* [6946] :

	- fixes:
		- publications for caller not consistent: wrongly using the info in From header from subsequent replies or requests ( use the From in Invite )
		- multiple records for the same user ( due to using the callid as a component of the publication id)


2010-06-04 18:06:58  Anca Vamanu, <anca at opensips dot org> 
	* [6944] :

	- modified the implementation of provisional media ( sequential instead of concurrent )


2010-06-03 23:11:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6942] :

	- WARN -> DBG if socket is not local (too noisy when nusing DB mode 3)


2010-06-03 13:57:53  Anca Vamanu, <anca at opensips dot org> 
	* [6938] :

	- fix not updating state for all received requests


2010-06-03 12:38:52  Anca Vamanu, <anca at opensips dot org> 
	* [6937] :

	- added a state check before attempting to send reply to prevent deleting the b2b logic record due to retransmissions 


2010-06-02 23:02:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6936] :

	fixed bugs in checking the NULL ptr for port and proto.


2010-06-02 21:21:35  Anca Vamanu, <anca at opensips dot org> 
	* [6934] :

	- fixed multiple CRLF in multipart body ( reported by Juha Heinanen)


2010-06-02 19:15:45  Anca Vamanu, <anca at opensips dot org> 
	* [6932] :

	- fixed: not saving scenario id for the new created entity when provisional uri was used


2010-06-02 13:38:30  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6930] :

	Fixes for MediaProxy ICE support after SIPit26:
	  - ICE attributes may appear at the session level.
	  - Insert our RTCP component if we found another component: some clients
	    may not use a=rtcp line but then insert a RTCP candidate component.


2010-06-02 11:30:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6927] :

	- fixed extraction of contact URIs when more than one Contact header is present in a single 3xx redirect reply


2010-06-01 14:04:42  Anca Vamanu, <anca at opensips dot org> 
	* [6925] :

	- added the possiblity while bridging with provisional media, to use the initial sdp as body for the Invite sent to the callee (initial Invite without a body seems not to be accepted by many endpoints)


2010-05-31 17:26:34  Anca Vamanu, <anca at opensips dot org> 
	* [6923] :

	- fixed bug in pua module - rewriting pointer given as parameter ( reported by Juha Heinanen)
	- changes in rls module to allow subscriptions to other rls lists


2010-05-28 10:28:29  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6921] :

	-fixed calculation of the Route param string (as len). This bug was introduced when the order of the Route param was changed (rev 5760).
	 Credits for reporting it go to Benixon
	 Closes bug #2999941


2010-05-28 10:20:49  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6918] :

	- fixed bogus free (of a NULL pointer) when hostent_cpy() fails because of lack of pkg mem


2010-05-27 20:37:02  Anca Vamanu, <anca at opensips dot org> 
	* [6916] :

	- fixed bug in matching dialog record ( wrongly relied on the From header being the same in request and reply )


2010-05-27 19:44:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6915] :

	fixed bogus "goto" -> the data_refcnt was dropping below 0 and the dp_reload locking was leading to a general deadlock


2010-05-27 11:55:41  Anca Vamanu, <anca at opensips dot org> 
	* [6913] :

	- fixed incomplete handling of BYE from provisional media server


2010-05-26 12:23:27  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6910] :

	proper include order (for compile flags)
	Credits goto Walter Doekes
	closes 3003935


2010-05-26 11:53:09  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6907] :

	- "-g" compile options (debug symbols) is added for mode=debug also
	  Credits go to Walter Doekes
	  Closes bug 3003933


2010-05-26 10:28:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6905] :

	- t_replicate() can also work if the transaction already exists (like t_newtran() is called before t_replicate() )
	  Closes bug #2989974


2010-05-26 06:35:25  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6903] :

	Added DeviceInfo=<SBC IP> in AuthReq if there is not P-Source-Device in indirect work mode.


2010-05-25 23:12:44  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6899] :

	docs and examples updated


2010-05-25 19:49:35  Anca Vamanu, <anca at opensips dot org> 
	* [6897] :

	- fixed bug - opensips crashing if negative reply received while bridging - reported by Jeff Pyle
	- added a new feature: when bridging to a new destination connect the old entity to a media server to hear a ringing tone until the real destination answers


2010-05-25 19:22:55  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6895] :

	-timerec column may be NULL


2010-05-25 19:14:02  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6893] :

	- ERR->DBG if /proc/net/[tcp|udp] is not available.


2010-05-24 20:26:24  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6892] :

	- nat_uac_test() and fix_nated_contact() process all the contacts (multiple URIs per header and multiple headers per message)
	  Closes bug 2993101.


2010-05-24 20:24:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6891] :

	- fixed bug in getting the msg destination -> new_uri can be NULL!


2010-05-24 09:55:26  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6890] :

	1. Added indirect work mode.
	2. Changed append network ID default value.
	3. Updated sample configuration file.
	4. Updated doc.


2010-05-23 23:54:05  Anca Vamanu, <anca at opensips dot org> 
	* [6887] :

	- fix in BLA - went back to the initial behavior: do not send Notify to the phone that has just sent the state update


2010-05-23 16:23:17  Anca Vamanu, <anca at opensips dot org> 
	* [6885] :

	- added the possiblity to use script variables as expires parameter in cache_store function 


2010-05-22 18:01:07  Anca Vamanu, <anca at opensips dot org> 
	* [6884] :

	- added checks for resource id length and increased the pres_id size in pua table to equal the max size of the ids generated by rls


2010-05-21 17:42:09  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6881] :

	-fixed bug in case-sensitiviness - as usrloc has not option on that, be case sensitive all the time, otherwise you cannot find AORs with upper cases.


2010-05-21 01:51:03  Anca Vamanu, <anca at opensips dot org> 
	* [6879] :

	- fixed bug in rls due to not synchronizing the code with the recent changes in pua
	- fixed version initial values ( MUST be 0 )


2010-05-14 15:57:29  Andrei Dragus <adragus at opensips dot org> 
	* [6877] :

	added dialplan to exclude_modules


2010-05-14 15:52:23  Andrei Dragus <adragus at opensips dot org> 
	* [6876] :

	modified docs


2010-05-14 15:45:36  Andrei Dragus <adragus at opensips dot org> 
	* [6875] :

	ported to pcre


2010-05-13 09:09:24  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6874] :

	Fixed bug of removing '+' in numbers.


2010-05-12 19:45:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6871] :

	- when cross searching dialogs, consider also the dialogs in early state (not yet established) - needed in some transfer cases.
	  Reported by elred_ on IRC channel


2010-05-12 18:39:05  Anca Vamanu, <anca at opensips dot org> 
	* [6868] :

	- fixed a bug in storing data in database (thanks to Even Andre at oyatel)


2010-05-12 15:36:38  Anca Vamanu, <anca at opensips dot org> 
	* [6866] :

	- remove the compulsory constraint for module parameter 'default_domain'


2010-05-12 12:41:19  Anca Vamanu, <anca at opensips dot org> 
	* [6864] :

	- fixed schema for pua table ( removed not invalid not null constraint on some columns )
	- fixed a typo in last commit in presence


2010-05-11 17:31:23  Anca Vamanu, <anca at opensips dot org> 
	* [6862] :

	- fixed pua schema - remote contact can be null


2010-05-11 16:29:04  Anca Vamanu, <anca at opensips dot org> 
	* [6860] :

	- limit the size of the generated pres_id ( not to exceed the length of the filed in the database table)


2010-05-11 15:27:57  Anca Vamanu, <anca at opensips dot org> 
	* [6857] :

	- fix - deleted by mistake a use_table statement in the last commit


2010-05-11 10:17:11  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6855] :

	- fixed SEQ_MATCH_FALLBACK (dialog matching with fallback) - do fallback to SIP matching also if the DID found but (1) the dialog was not found based on DID or (2) the DID-based found dialog does not match from SIP point of view the current request (failed tight matching).


2010-05-11 09:59:25  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6853] :

	- fixed context evaluation - the "reply" context may return a FAKE_REPLY (invalid pointer) in failure route


2010-05-10 10:31:08  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6849] :

	Removed error message since a=rtcp line could contain the port only.
	Reported by Thomas Gelf.



2010-05-06 21:01:36  Anca Vamanu, <anca at opensips dot org> 
	* [6845] :

	- fixed an old bug in presence - if a contact unregistering without sending a Publish with expires=0 and then reregistered again, when the old presence entry expired - it appeared offline to its watchers (appeared only when fallback2db parameter was not set)


2010-05-05 14:43:51  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6844] :

	- is_in_ds_list() takes on more extra optional param "active_only" - returns true only if the destination is in list and active.

	- fixed probing and re-enabling of the inactive destinations -> if inactive, do not probe it and not re-enable it.


2010-05-05 14:15:52  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6842] :

	- removed bogus space


2010-05-05 13:10:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6841] :

	- fixed string comps (use == instead of -eq).
	  Reported by Airton Kuada


2010-05-03 15:20:26  Anca Vamanu, <anca at opensips dot org> 
	* [6839] :

	- added the possibility to send message in xmpp on the callback of a received xmpp message
	- bug fix: considered sip_domain compulsory


2010-05-03 14:17:24  Anca Vamanu, <anca at opensips dot org> 
	* [6837] :

	- fixed segmentation fault if send_subscribe using modules do not set to_uri argument


2010-04-30 11:37:20  Anca Vamanu, <anca at opensips dot org> 
	* [6835] :

	- accept also null parameter from logic (suggested by Oliver Detour)


2010-04-29 18:13:11  Anca Vamanu, <anca at opensips dot org> 
	* [6834] :

	- - some bug fixes:
		- buffer overflow checks
		- improved the action processing order
		- external scenarios fixes (became unfunctional due to latest changes)
	- added a new MI command - b2b_bridge, allows brigding a party from a current
	ongoing call to another destination.



2010-04-29 15:00:24  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6832] :

	- fixed index in dlg_list pagination


2010-04-29 14:06:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6831] :

	- support in dlg_list MI command for listing dialogs with offset and counter (and not only all of them) - needed by OpenSIPS Control Panel for pagination of dialog info


2010-04-29 13:50:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6828] :

	- fixed bug in error handling - one more unref is required if the dialog failed to be attached to transaction


2010-04-28 18:38:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6827] :

	- docs updated


2010-04-28 16:51:26  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6826] :

	- new get_dialog_info() function to exchange info between dialogs


2010-04-28 16:01:41  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6825] :

	-  applied patch 2981046 from Walter Doekes
	  attached some minor fixes to the documentation (and one replacement of the diaaloginfo "Trying" to "trying").


2010-04-27 11:34:29  Anca Vamanu, <anca at opensips dot org> 
	* [6822] :

	- fixed possible deadlock in pua module


2010-04-26 15:07:30  Anca Vamanu, <anca at opensips dot org> 
	* [6820] :

	- improved the usage of min_expires and set a new default value for it (300 sec)


2010-04-26 10:10:51  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6819] :

	Support auto-bridging feature found in the latest RTPproxy (trunk code at the
	moment, 1.3 when released). Feature is still considered work in progress, so
	use with caution. Should be a no-op for the users of the stable RTPproxy version
	(1.2 and less).



2010-04-26 10:00:34  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6818] :

	This is a mechanism to register per-message callback handlers
	to be called at certain points of the message lifecycle.

	Apart from the sip_msg structure, each handler is passed a
	pointer to a handler type-specific structure from the core
	and pointer to an opaque structure allocated by the module.

	The following callback types are supported:

	 REQ_PRE_FORWARD - called before the request is getting reassembled
	 for delively. Can be used to apply some last-minute transformations.
	 Depending on the script structure this handler may not be called for
	 particular message at all or can be called multiple times. Core will
 pass "struct proxy *" to the handler describing destination for the
	 current request.

	 MSG_DESTROY - called when the message is being freed. Can be used to
	 release any module-specific per-message resources, including any
	 dynamic structures passed to the msg_callback_add(). Once
	 registered, this handler is guranteed to be invoked exactly once for
	 each message.

	To avoid memory leaks, code that allocates dynamic structures for use
	in the callback handlers should always register MSG_DESTROY handler
	and free all memory in there.

	Right now it's pretty much a no-op, until there are modules that
	use this new interface. Such change for the nathelper is coming.



2010-04-23 17:59:05  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6816] :

	- check for aaa_url added
	- replaced UINT4 with uint32_t (thanks to Alex Massover)


2010-04-23 14:49:29  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6812] :

	Fix chrash when received reply contains more streams than the INVITE.


2010-04-23 11:33:43  Anca Vamanu, <anca at opensips dot org> 
	* [6810] :

	- improvements
		- extra headers from init request passed in all bridging Invites
		- added a info log message to print the callids of the dialogs in a pair


2010-04-22 14:18:07  Anca Vamanu, <anca at opensips dot org> 
	* [6808] :

	- fixed some problems in dialog - presence mixing:
		- broken state if a new call is attempted while another call is on going
		- broken state if a presence publish refresh is received while a call is on going


2010-04-21 18:35:05  Anca Vamanu, <anca at opensips dot org> 
	* [6806] :

	- some fixes to allow client id reusage ( permits loops in scenario ) and do a better ordination of the actions ( bridge last )


2010-04-21 16:37:39  Anca Vamanu, <anca at opensips dot org> 
	* [6805] :

	- fix bug in searching for header


2010-04-21 15:29:18  Anca Vamanu, <anca at opensips dot org> 
	* [6803] :

	- fixed behavior: if the scenario requires bridging with an URI given in the header of the received request and that header is not found, do simple pass through


2010-04-20 16:16:19  Anca Vamanu, <anca at opensips dot org> 
	* [6801] :

	- addition for BLA: the possibility to define a custom presentity URI to use for BLA Subscriptions


2010-04-19 20:03:48  Anca Vamanu, <anca at opensips dot org> 
	* [6798] :

	- fixed buf in bla: NULL body notifications when publish was received in some cases


2010-04-19 19:36:06  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6797] :

	- more fixes related to the prev one (to handle T_UNDEFINED case)


2010-04-19 19:11:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6796] :

	- fixed dialgo init when the transaction already exists at create_dialog() time


2010-04-19 17:20:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6793] :

	- fixed bug in extracting the value of $rP (RURI proto) from the transport URI param


2010-04-16 13:42:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6791] :

	- fixed bogus usage of attr avp - first check if it was defined.


2010-04-15 18:12:29  Anca Vamanu, <anca at opensips dot org> 
	* [6788] :

	- fixed a bug when bridging an only call party to a new one ( bad from uri if the old entity was of type server), reported by Antonio Anderson Souza


2010-04-15 13:39:04  Anca Vamanu, <anca at opensips dot org> 
	* [6786] :

	- fixed a bug in dialog mixed with presence


2010-04-14 13:29:50  Anca Vamanu, <anca at opensips dot org> 
	* [6784] :

	- fixed using unacceptable characters in from tag ( reported by Richard Revels and Jeff Pyle )


2010-04-14 12:52:40  Andrei Dragus <adragus at opensips dot org> 
	* [6782] :

	Fixed error checking


2010-04-14 12:43:03  Anca Vamanu, <anca at opensips dot org> 
	* [6780] :

	- improved the documentation for b2b_init_request function


2010-04-13 19:36:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6778] :

	- FROM must be also checked when generating hop-by-hop ACK


2010-04-13 18:46:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6775] :

	- fixed missing uri.headers parsing in the URI transformation


2010-04-13 14:04:40  Anca Vamanu, <anca at opensips dot org> 
	* [6773] :

	- improved dialog and presence mixing: on call terminated, if no other presence information found in database send a notify with state 'closed'.


2010-04-12 16:02:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6771] :

	ds_select_xxx() fuctions allowed from failure route
	ds_next_xxx() and ds_mark_xxx() allowed from request route
	docs updated


2010-04-12 15:40:49  Anca Vamanu, <anca at opensips dot org> 
	* [6769] :

	- new cool feature in presence server: mixing dialog info with presence. The presence server can now generate presence information from dialog state and tell you if a buddy is in a call even if his phone did not send a presence Publish with this information.


2010-04-12 11:51:21  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6766] :

	Allow strip_body functions to be called from onreply_route, as mentioned in the docs.



2010-04-09 19:10:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6765] :

	- fixed mem corruption when the transaction created by a cpl proxy node fails (nothing sent out) is later used from the script for sendin some stateful err replies.


2010-04-09 12:06:20  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6763] :

	- fixed cloning of multi body structure...as the structure is not cloned, reset the pointer so that the body will be reparsed in failure route.
	Credits for reporting go to pawpro on IRC channel #opensips


2010-04-08 13:54:29  Anca Vamanu, <anca at opensips dot org> 
	* [6761] :

	- fixed not sending Publish with trying state for the callee


2010-04-07 11:42:28  Anca Vamanu, <anca at opensips dot org> 
	* [6759] :

	- fix: look in all the headers when serching a header by name


2010-04-02 17:19:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6757] :

	- increased the size of the array holding the extra headers.


2010-04-02 14:49:33  Anca Vamanu, <anca at opensips dot org> 
	* [6753] :

	- enhancement for dialoginfo to work better with Linksys - if no dialoginfo published information is found - send an body without any dialog ( rather then sending no body) - reported by James Lamanna


2010-04-01 17:31:12  Anca Vamanu, <anca at opensips dot org> 
	* [6752] :

	- fix: allocate dynamic memory instead of using a static buffer for copying and completing the extra headers ( their size might get quite large since there are 8 headers that might be added) - reported by Jeff Pyle


2010-04-01 16:30:08  Anca Vamanu, <anca at opensips dot org> 
	* [6751] :

	- applied modified patch from Walter Doekes ( patch #2980529): do not format the xml body - not to include useless characters that make the body larger


2010-04-01 15:44:18  Anca Vamanu, <anca at opensips dot org> 
	* [6748] :

	- applied patch from Walter Doekes ( patch #2980522): correct macro definition ( without triling ;)


2010-04-01 11:59:48  Anca Vamanu, <anca at opensips dot org> 
	* [6746] :

	- added 2 new features:
		- the possibility to tell the module to generate dialoginfo only for one side of the dialog
		- the possiblity to define custom caller and callee information to be used when generating the dialoginfo


2010-04-01 01:51:13  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6745] :

	o Improve buffer management by using dynamicly allocated buffers
	instead of static ones;

	o Rework fix for the static buffer overflow with the content of
	the overly long payload types list. Instead of silently
	truncating the list, use dynamic buffer allocated on heap to
	keep that list growing it if necessary.



2010-03-31 19:11:45  Andrei Dragus <adragus at opensips dot org> 
	* [6744] :

	Fixed bug with regexps


2010-03-29 15:16:51  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6743] :

	- fixed shm mem leak when get_all_bodies() is used multiple times


2010-03-26 14:11:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6740] :

	- fixed encodig of Content-Type hdr.


2010-03-24 12:38:50  Anca Vamanu, <anca at opensips dot org> 
	* [6738] :

	- fixed typo in documentation (reported by Brett Nemeroff )


2010-03-23 12:19:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6736] :

	- fixed dialog shutdown procedure - if a transaction still refs a dialog, when distroying the transaction, before unrefing the dialog, check if the dialog module didn't shutdown already
	  Closes bug 2972604.


2010-03-23 11:56:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6733] :

	fixed the iteration (when returning a valid record) through the SRV and A DNS records - this bug was affectig the DNS based failover

	Credits goto Byron Clark.
	Closes bug 2974801.


2010-03-22 18:22:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6731] :

	- fixed data type for the prox_route name (INT -> STR)


2010-03-19 16:38:32  Anca Vamanu, <anca at opensips dot org> 
	* [6729] :

	- allowed calling send_reply function from failure route (suggested by Ryan Bullock, feature request #2973188)


2010-03-18 15:43:02  Anca Vamanu, <anca at opensips dot org> 
	* [6727] :

	- BLA fix: not replacing remote target ip with domain in the case when no previous dialog was stored


2010-03-16 17:02:05  Anca Vamanu, <anca at opensips dot org> 
	* [6724] :

	- updated default config - remove obsolete function t_release


2010-03-15 13:25:23  Anca Vamanu, <anca at opensips dot org> 
	* [6722] :

	- fixes:
		- properly clean expired records from memory and database
		- delete also from database when a record expires



2010-03-12 19:36:01  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6721] :

	- bash -> sh
	  bash is not present by dfault on all unix distros (like freebsd), so let's try a more generic one.
	  reported by Jesus Rodriguez


2010-03-11 18:15:33  Anca Vamanu, <anca at opensips dot org> 
	* [6714] :

	- fixed using always using the preferred socket to send requests if defined, it was not correct in the case when the next hop required another protocol  (see discussion http://lists.opensips.org/pipermail/users/2010-March/011325.html)


2010-03-11 18:14:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6713] :

	- fixed bug in reloading lb data - generate the profile_id (of each destination) in such a way to depend only on DB info (and not runtime/load info)


2010-03-11 14:47:11  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6710] :

	- fixed DB schema for berkeley backend


2010-03-11 14:09:55  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6707] :

	- fixed the missing dlg info in reply route for the sequential requests
	  Closes bug #2941492


2010-03-10 18:37:55  Anca Vamanu, <anca at opensips dot org> 
	* [6705] :

	- updated pua_xmpp modules to use the new functions that take into consideration sip_domain parameter


2010-03-10 17:54:22  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6703] :

	Added support for ICE negotiation.

	MediaProxy module will add necessary candidates so that ICE
	negotiation isn't broken when the SDP is mangled.
	Solution design: http://mediaproxy-ng.org/wiki/ICE



2010-03-10 16:54:50  Anca Vamanu, <anca at opensips dot org> 
	* [6701] :

	- fixed meaning of sip_domain parameter


2010-03-10 13:42:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6698] :

	- fixed load-balacer DB schema for berkeley backend


2010-03-10 12:27:43  Anca Vamanu, <anca at opensips dot org> 
	* [6696] :

	- removed redundant macro definition


2010-03-10 12:05:35  Anca Vamanu, <anca at opensips dot org> 
	* [6691] :

	- updated documentation and removed some unused variables


2010-03-10 12:05:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6690] :

	- " dereferencing type-punned pointer" warning removed


2010-03-10 11:59:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6689] :

	- 64b compile warning fixed


2010-03-10 11:51:54  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6688] :

	- added new flag (8) to t_relay() to control the propagation of the Reason hdr in the CANCEL requests.


2010-03-09 19:57:30  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6685] :

	bug fixed - do not return 0 as this will break the script execution
	Credits goto Emmanuel BUU
	Closes patch #2910271


2010-03-09 19:49:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6683] :

	- docs updated


2010-03-09 19:46:14  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6682] :

	applied patch from Emmanuel BUU :
	 Enhancement of set_rtp_proxy_set function tu support AVP so proxy sets can
	be choosen dynamically
	 Closes patch #2925069


2010-03-09 13:26:20  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6664] :

	- Update session information when a 200 OK for an INVITE is received
	without SDP.

	This may happen when using 100rel (RFC3262) or with some buggy 
	user-agents which send the SDP only in 18X responsed even when they
	don't use 100rel.


2010-03-09 13:24:34  Anca Vamanu, <anca at opensips dot org> 
	* [6663] :

	- updated documentation for devel api


2010-03-09 12:56:39  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6659] :

	- Fix the IP in the RTCP line.

	The IP in the RTCP line also needs to be mangled when MediaProxy
	is to be used.


2010-03-05 15:57:30  Andrei Dragus <adragus at opensips dot org> 
	* [6658] :

	 minor fix


2010-03-05 15:54:46  Andrei Dragus <adragus at opensips dot org> 
	* [6657] :

	Added multipart for otehr methods


2010-03-05 14:03:28  Andrei Dragus <adragus at opensips dot org> 
	* [6655] :

	Fixed warning


2010-03-05 13:49:04  Andrei Dragus <adragus at opensips dot org> 
	* [6654] :

	Added content-length check


2010-03-05 13:34:07  Andrei Dragus <adragus at opensips dot org> 
	* [6653] :

	Modified condition


2010-03-05 12:40:40  Anca Vamanu, <anca at opensips dot org> 
	* [6651] :

	- some more fixes for BLA to prevent loosing line state due to race conditions


2010-03-05 12:40:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6650] :

	- one more missing data unref.


2010-03-05 12:25:19  Anca Vamanu, <anca at opensips dot org> 
	* [6649] :

	- appplied patch #2847397( Better blf support for linksys phones ), thanks to Angel Marin.


2010-03-05 04:35:19  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6647] :

	Added destination network ID in outbound URI.


2010-03-04 18:54:29  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6645] :

	- fixed bug when using the is_host_uri_local() from failure route -> first destination is in RURI not in branches.


2010-03-04 18:49:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6644] :

	- return a different code if the failure is because of DB error
	  Applied patch from coxx (SF id coxx)
	  Closes patch 2951523.


2010-03-04 18:37:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6640] :

	- applayed patch for fixing pointer math bug when parsing To header parameter values enclosed in quotes : the last char of the value is getting chopped off.
	  Credits go to John Riordan.
	  Closes patch #2958879



2010-03-04 18:23:39  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6638] :

	- bug fixed in unlocking the read ops whe processing the probing replies.
	  Credits goto James Van Vleet 
	  Closes patch 2962767


2010-03-04 17:31:15  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6635] :

	- proper handling of index 0 in pseudo-variables
	  Reported by Roman Shpount 
	  Closes bug #2958257


2010-03-04 14:07:21  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6632] :

	- fixed iteration in the NAPTR records (similar to #6631)


2010-03-04 14:04:48  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6631] :

	- fixed iteration in the SRV records
	  Credits go to Byron Clark
	  Closes bug #2956739


2010-03-04 13:24:16  Anca Vamanu, <anca at opensips dot org> 
	* [6630] :

	- fixed some problems with BLA (including a phone not getting the proper state is comming online latter and a call is in progress)


2010-03-02 11:57:03  Anca Vamanu, <anca at opensips dot org> 
	* [6629] :

	- updated the documentation to mention that this module can not be used in no fork mode ( reported by Walter Doekes )


2010-03-01 12:44:23  Anca Vamanu, <anca at opensips dot org> 
	* [6628] :

	- added some not NULL checks


2010-03-01 12:06:00  Anca Vamanu, <anca at opensips dot org> 
	* [6627] :

	- updated pua table - added another column to_uri


2010-02-26 18:49:20  Anca Vamanu, <anca at opensips dot org> 
	* [6626] :

	- fixed the call of the function from xcap_client module to the new definition


2010-02-26 18:46:32  Anca Vamanu, <anca at opensips dot org> 
	* [6625] :

	- made some fixes for BLA ( aggregate stat rather than rewrite)


2010-02-25 09:37:28  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6623] :

	- removed bogus message -> module allow starting with no destinations, so why reporting as error on timer :P


2010-02-24 11:56:44  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6621] :

	-fixed missing "return" - related to fix 6603.
	 Reported by Richard Revels
	 Closes bug 2955731..


2010-02-24 11:45:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6618] :

	- fixed imporper table init - must be before checkig table version
	  Credits go to  Walter Doekes ( SF id wdoekes).
	  Closes bug report #2956632


2010-02-19 18:33:23  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6616] :

	- fixed misplaced radius error message (Thanks to Michael Schloh von Bennewitz)


2010-02-19 16:11:38  Andrei Dragus <adragus at opensips dot org> 
	* [6615] :

	Added backward database compatibility


2010-02-18 14:48:37  Andrei Dragus <adragus at opensips dot org> 
	* [6614] :

	Added tm dependency in docs


2010-02-18 14:43:41  Andrei Dragus <adragus at opensips dot org> 
	* [6613] :

	Updated readme for drouting module


2010-02-18 14:42:49  Andrei Dragus <adragus at opensips dot org> 
	* [6612] :

	Added probing to drouting


2010-02-18 14:41:09  Andrei Dragus <adragus at opensips dot org> 
	* [6611] :

	Updated schema for gr_gateways


2010-02-18 14:40:36  Andrei Dragus <adragus at opensips dot org> 
	* [6610] :

	Updated dr_gateways creation


2010-02-17 11:50:17  Anca Vamanu, <anca at opensips dot org> 
	* [6609] :

	- fixed some issues with document manipulation for non integrated mode 


2010-02-16 12:56:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6607] :

	- fixed missing memset - related to fix 6605.
	  Credits go to  Eugene (evereta on SF).


2010-02-15 14:26:15  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6605] :

	- fixed bug in getting the next udomain. The computing of the back reference to the main structure is broken 
	  Credits go to  John Khvatov
	- fixed proper initalizing of get_next_udomain() in the usrloc API


2010-02-15 13:33:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6604] :

	- fixed mem leak (pkg mem) when the nameaddr transformation is applied to an URI with params
	  Credits for finding and fixing this go to Eugene (evereta on SF).
	  Closes bug 2950939


2010-02-15 11:33:14  Anca Vamanu, <anca at opensips dot org> 
	* [6602] :

	- added some checks to prevent crash when reply is FAKED_REPLY


2010-02-12 12:30:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6599] :

	- fixed bogus removel of Route bodys when switching from SR to LR. If local Route and final Route are on the same Route hdr, you were ending up with an empty Route hdr.
	  Thanks to Ovidiu Sas for reporting and helping with debug info.


2010-02-12 12:00:21  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6597] :

	- fixed buffer overflow.
	  Thanks to Jeff Pyle for reporting and providing logs.


2010-02-11 20:05:30  Anca Vamanu, <anca at opensips dot org> 
	* [6596] :

	- improved the correlation between the received and the generated SIP message - use also the cseq (reported by Brian, fix to work with authentification)


2010-02-11 17:56:13  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6591] :

	- fixed bug - even if NULL value is send, you still need to set the data type (this is required by some versions of libmysqlclient
	  Closes bug 2948054 and 2903579


2010-02-10 16:56:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6590] :

	- added ISN lookup for enum
	  References:
		http://www.freenum.org/
		ftp://ftp.ietf.org/rfc/rfc3872.txt
		ftp://ftp.ietf.org/rfc/rfc2871.txt
	 	http://www.iana.org/assignments/trip-parameters/

	  Contribution from Michael Schloh von Bennewitz



2010-02-10 15:50:31  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6587] :

	-fixed overlapping between log_facility in ACC module and the global (core) log_facility
	 Credits go to Norman Brandinger


2010-02-10 13:34:15  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6581] :

	- fixed compiling error (missing var) when systemV locks are used.


2010-02-10 13:23:48  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6580] :

	- fixed improper behaviour of script assigments. Instead of failing the assigment if a NULL var is found in the right side, the NULL vars will be "casted" to "" or 0 (str/int) and force the assigment.



2010-02-09 20:27:08  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6579] :

	- fixed crash when the dlg_list gets a callid param without a from_tag param.
	  Closes bug 2947827


2010-02-09 20:04:50  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6576] :

	- better error reporting on load (DB issues).
	  Closes bug #2946724.



2010-02-09 16:52:54  Anca Vamanu, <anca at opensips dot org> 
	* [6575] :

	- event dialog;sla - remove the check that no other parameters are defined ( to work with Aastra phones that use event: dialog;sla;include-session-description), reported by Norman Brandinger


2010-02-09 13:36:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6571] :

	fixed usage of TAGs (from and to) from the given headers (via MI command) - this got broken after the commit #6528



2010-02-09 12:51:25  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6570] :

	- eliminate possible bug in resetting the TM routes (branch, reply and branch).
	  To be 100% sure that we do not inherite some valid T from the previous processing, better resert first T and later the attached routes, otherwise we risk to reset the routes from the previous transaction


2010-02-05 17:32:05  Anca Vamanu, <anca at opensips dot org> 
	* [6569] :

	- removed the usage of obsolete t_release() function from the documentation ( reported by Steven C. Blair )


2010-02-03 16:47:18  Anca Vamanu, <anca at opensips dot org> 
	* [6567] :

	- fixed some issues: memory leaks, bad pointer connection between b2b_logic and b2b_entities, not strict enough checks for dialogs in b2b_entities


2010-02-03 14:41:08  Andrei Dragus <adragus at opensips dot org> 
	* [6565] :

	Fixed leak in usrloc


2010-02-03 12:56:29  Andrei Dragus <adragus at opensips dot org> 
	* [6564] :

	Function to estimate fetch value for db


2010-02-03 12:34:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6561] :

	History behind this change (WARN -> INFO):
	The messages you are seeing means that the TCP MANAGER process sees that all the TCP WORKER processes are already processing other messages, so  no one is free (idle), so , it will queue the current active connection to one of the TCP WORKERs...
	There is nothing wrong with this, it is the normal way it works - of course, if you have too few TCP workers, the probability to have queuing is higher.

	In UDP the queueing is not visible at application level as it is done by the kernel in the receive buffer that is assigned to the socket.

	In TCP the queueing is visible as there is a single TCP MANAGER process managing the connections (detecting the reads, connects, etc) which is quite fast (not doing any processing) -> the queueing is moved between the TCP MANAGER and TCP WORKERS.

	Also, to be sure you got it right, there is no relation between the TCP WORKER and a connection. A TCP WORKER process is just reading and processing a SIP message at a certain time. Next SIP message from the same connection may end up in a different TCP WORKER proc.



2010-02-02 13:20:44  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6557] :

	- fixed check of the dialog flag - if flag was not set, it was triggering dialog creation all the time
	- fixed creation of dialog for non-INVITE dialogs
	- fixed dialog validation when leg has no contact stored (skip contact<>ruri check)
	- fixed dialog termination - if we fail to send BYE, trigger dialog termination directly



2010-02-01 15:09:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6551] :

	fixed double free due bogus link of DNS records - if there are multiple SRV records returned and the last has non-SRV type, the SRV sorting alg will forget to reset a linking pointer


2010-02-01 12:21:05  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6550] :

	- fixed dialog checking (route part) when double RR is done (due proto/port/ip changing).
	- RR API extended to export also the number of removed Routes after doing loose_roue().


2010-01-29 12:25:04  Anca Vamanu, <anca at opensips dot org> 
	* [6547] :

	- fix for the crash reported in bug #2937441


2010-01-28 14:15:08  Anca Vamanu, <anca at opensips dot org> 
	* [6546] :

	- changed >= with == for return code checking (bug #2940274)


2010-01-28 13:50:43  Anca Vamanu, <anca at opensips dot org> 
	* [6543] :

	- fixed wrong strncmp of ruri with server address ( the port must be ignored if one is 5060 and the other not set), reported by Olivier Detour)


2010-01-26 13:16:46  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6540] :

	- fixed bogus addition of AVP - the value must be marked as STR
	- remove extr log info - the module and function names are automatically added by opensips logging function


2010-01-26 11:19:05  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6538] :

	- accept "" emotry string as "any" protocol.
	- fixed check in IP validity


2010-01-26 10:20:45  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6535] :

	- added an extra space between the display name and URI name in t_uac_dlg.


2010-01-25 20:26:00  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6534] :

	- fixed DB_STR / DB_STRING incompatibility when loading from DB
	  Reported by Leonid


2010-01-25 18:05:26  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6531] :

	- fixed bogus handling of NULL flag in return data after queries.
	  Reported by Alan Frisch


2010-01-25 17:03:06  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6528] :

	- fixed extraction of URI and display part of FROM / TO headers in t_uac_dlg() MI function.
	  Reported by Chris Maciejewski.


2010-01-25 16:35:05  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6527] :

	- new "f" flag added to save() to force overwriting of old contacts with the new ones when max_contacts is reached.


2010-01-22 18:46:03  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6525] :

	- fixed bug in signal handler -> the extra proc must use the SIGUSR2 handler from the core, otherwise it will die when core will try to collect pkg mem stats (via SIGUSR2). NOTE the SIGUSR2 terminates the proc if not handled.
	  Reported by Alex Massover.
	  Thanks to Richard Revels for the hints
	  Closes bug 2936343.


2010-01-22 18:33:55  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6523] :

	- fixed memory leak in serialize function.
	  Reported by Richard Revels
	  Closes bug 2934618


2010-01-22 12:41:55  Andrei Dragus <adragus at opensips dot org> 
	* [6521] :

	Fixed potential overflow


2010-01-22 12:27:22  Andrei Dragus <adragus at opensips dot org> 
	* [6519] :

	Added warning before defrag starts


2010-01-21 19:40:05  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6518] :

	- fixed typo in docs.
	  Closes bug report 2936420



2010-01-20 17:19:29  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6514] :

	- fixed memory leak in multibody parser


2010-01-20 15:13:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6513] :

	- new parameter added "ds_probing_sock" to allow setting a specific socket to be used for sending the probing requests.


2010-01-20 15:04:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6512] :

	new TM API function new_auto_dlg_uac() - an extension of new_dlg_uac() that takes care by itself to generate callid, from_tag, and cseq


2010-01-18 05:00:31  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6511] :

	1. Changed configuration option proxy_type to service_type.
	2. Added operator name support in AuthReq and AuthRsp.


2010-01-08 19:44:21  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6508] :

	-fixed infinit loop doe bogus iteration.
	 Credits go to Walter Doekes
	 Closes bug #2928267.


2010-01-08 11:51:24  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6505] :

	- fixed wrong order of param for t_write_req() and t_write_unix()
	  Credits go to Richard Revels 
	  Closes bug #2927295


2010-01-07 17:57:46  Anca Vamanu, <anca at opensips dot org> 
	* [6504] :

	- removed the URI encoding mechanism from the XMPP gateway(now the gateway is transparent)
	- added a parameter: sip_domain representing the SIP domain advertised in XMPP)


2010-01-05 16:11:40  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6502] :

	-fixed bogus example in docs for alternate_ip param.
	 Credits go to Ha Do


2010-01-04 20:33:29  Anca Vamanu, <anca at opensips dot org> 
	* [6500] :

	- fixed copy paste error
	- fixed not printing the record route in reverse order when learned from reply
	- fixed wrong check when matching b2b requests( checked the source ip)


2010-01-04 17:49:33  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6497] :

	- fixed detection for gcc params on OSX (arch related)
	  Reported by Norman Brandinger
	  Closes bug #2911660


2010-01-04 17:46:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6495] :

	- just spacing 


2010-01-04 17:27:53  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6493] :

	- added some more info in error report.


2010-01-04 17:24:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6491] :

	- fixed bug in improper handling of probing mode 1.
	  Reported by Bill W.


2010-01-04 17:10:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6488] :

	- fixed documentation (t_write_fifo -> t_write_req )
	- fixed fixup function for t_write_XXX  (wrong param no).

	Closes bug #2925298
	Credits go to Richard Revels


2010-01-04 14:26:41  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6487] :

	Add dst_address property to the message object. It returns destination
	address (ip, port) of the packet in question.



2009-12-29 21:54:29  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6483] :

	- fixed typo in header spec (type versus flag).
	  Credits go to Kristian Borgen (kriborgen)
	  Related to bug #2921180


2009-12-29 15:49:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6481] :

	- fixed un-initalized variable when display part was not changed via uac_replace_to() function.
	  Closes bug #2922548
	  Credits go to Antonio Souza.


2009-12-29 15:23:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6478] :

	- fixed bogus name of module paramter: setid_pvname -> setid_pvar
	  Closes bug #2921387
	  Credits go to Kristian Borgen.


2009-12-29 14:42:41  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6476] :

	typo fixed (related to prev commit)


2009-12-29 14:39:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6475] :

	-fixed infinte loop if all destinations are disabled and if use_default is enabled.


2009-12-27 11:32:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6472] :

	- fixing bogus doc
	  Credits go to Norman Brandinger
	  Closes bug #2920838


2009-12-27 11:25:06  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6470] :

	- fixed another bogus related to init of iterator.
	  Credits goto Alexander


2009-12-24 21:10:27  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6468] :

	- fixed bogus init of iterator.
	  Credits goto Alexander


2009-12-24 10:06:07  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6465] :

	- fixed improper function call in printing help message
	  Credits go to Yar Tikhiy
	  Closes bug #2919881


2009-12-24 09:59:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6463] :

	- fixed naming of obsoleted function check_from|to => db_check_from|to
	  Reported by Yar Tikhiy
	  Closes bug #2920423


2009-12-24 09:55:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6461] :

	- removed dependence to DB URL for db_check_from|to if the use_uri_table param is not set!
	  Reported by Daniel Goepp


2009-12-22 14:30:42  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6460] :

	- fixed order for include files (required on OpenBSD)


2009-12-21 19:18:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6451] :

	- fixed missing test on mem free
	  Credits go to Alexander.


2009-12-21 13:57:59  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6448] :

	- the default alg "first entry is used" gets an official name of "8" to avoid useless warnings


2009-12-17 13:17:06  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6445] :

	- fixed printing the name of the script route triggered by rule matching
	- fixed hadling of the return code (dropping action) from the script route.


2009-12-16 12:58:46  Anca Vamanu, <anca at opensips dot org> 
	* [6444] :

	- fixed bug for BLA - error when searching record (always getting to search in database)
	- took out some useless sizeof(char) calls


2009-12-15 17:31:00  Anca Vamanu, <anca at opensips dot org> 
	* [6440] :

	- extended the methods accepted to pass through b2b (if not a method for which a scenario rule can be defined, do simple pass through)


2009-12-14 14:34:12  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6433] :

	- fixed bogus definition of sip_trace table which was incompatible with the db_text engine.


2009-12-14 11:50:49  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6432] :

	Fix description of the call_function() method.



2009-12-14 11:39:32  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6431] :

	Use generic name of python interpreter and put a note about which
	versions are supported.



2009-12-14 11:20:19  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6430] :

	Add python module, which allows extending opensips.cfg using full-fleged
	Python code. For now only few basic methods are supported and it's also
	possible to call functions in other modules from the python code.

	The architecture of the Python environment follows the OpenSIPS paradigm:
	there are as many independent environments as there are OpenSIPS working
	processes. At the same time, each Python environment instance, which usually
	only gets control when the message is received, can create its own thread
	of execution and those threads can potentially co-operate using pipes,
	shared memory, database or some other IPC mechanism to provide
	transaction-stateful or even dialog-stateful features. The module itself
	is GIL-safe.

	The code should be considered experimental and work-in-progress, so use
	on your own risk.

	TODO: documentation, access to AVPs, interface to shared memory.

	Patches, documentation and suggestions are welcome.

	Sponsored by:	Sippy Software, Inc., http://www.sippysoft.com


2009-12-14 10:28:50  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6429] :

	1. Added buffer size check.
	2. Added proxy_type for number portability.


2009-12-12 15:55:11  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6427] :

	In case opensips force the use of sst, it add a Session-Expire with
	interval equal to max(OpenSIPS minSE, UAS minSE).
	This does not allow to set a minSE of 90s (the minimum allowed) but start
	with a different interval (say 300s).

	This patch add a sst_interval parameter with a default value of 0 (to stick
	to the current behavior).
	The Session-Expire interval is set to the max value of (OpenSIPS minSE, UAS
	minSE, sst_interval).

	Closes patch #2887955
	Credits go to Christophe Sollet.


2009-12-12 12:33:36  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6425] :

	fixed mimimum val for rtpproxy_timeout -> secs to milisecs -> allows timeouts less than one sec.

	closes patch #2893189
	credits go to Christophe Sollet.


2009-12-12 11:38:01  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6423] :

	- fixed issue with avp printing buffer being too small -> new config param to control the size:
		Closes patch #2911666
		Credits go to Norm Brandinger


2009-12-11 21:12:54  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6421] :

	- added man pages for debian 
	  Closes patch 2902164.
	  Credits go to Alejandro Rios


2009-12-11 21:02:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6418] :

	The change adds the following to the error messages produced:

	1. The size of the message that caused the overflow to happen
	2. The size of the receiving buffer

	Closes patch #2911665
	Credits go to Norm Brandinger


2009-12-11 18:03:12  Anca Vamanu, <anca at opensips dot org> 
	* [6417] :

	- fixed matching of indialog requests - do not capture requests that are not destined for me(Record-Route header or ruri does not point to me)
	- fixed matching for CANCEL messages - check ruri = ruri of INVITE


2009-12-11 16:35:20  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6414] :

	- now the radius_config parameter must be set only if custom request functions are used


2009-12-11 16:20:52  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6413] :

	- eol missing (compile warning)


2009-12-11 16:18:29  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6412] :

	- fixed 64 bits compiling warnings


2009-12-11 16:09:56  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6411] :

	- licenses added


2009-12-11 13:44:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6410] :

	applied pacht to fix libs to linking for mmgeoip module

	Closes #2903829
	Credits go to Kobi Eshun


2009-12-11 13:12:03  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6406] :

	- fixed bogus handling of "return" statement inside a "while" block.

	Closes bug #2907864.
	Reproted by Norman Brandinger


2009-12-11 11:31:52  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6404] :

	- added extra debug messages
	- fixed hashtable match bug (reported by Jai Rangi)


2009-12-11 10:51:15  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6401] :

	The <header> tags in some examples are not valid html. The attached patch
	changes them to <head>.

	Closes bug #2911705.
	Credits go to Norm Brandinger


2009-12-10 20:27:30  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6399] :

	- fixed solaris and suncc compiling

	  Credits go to Michal Bielicki @ Seventh Signal



2009-12-10 19:38:18  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6398] :

	- fixed makefiles for the perl modules ; the syntax of makefile (for calling external shell commands) is not like in shell script :).
	- for gcc added some extra compile flags to get rid of the "redundant declaration" warning due auto created C files


2009-12-10 18:14:23  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6397] :

	- fixed all makefiles using autodetection based on "which" -> older version was not working on non-linux systems.
	  Credits go to Michal Bielicki @ Seventh Signal


2009-12-10 17:52:44  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6395] :

	- invalid entries from the address table are now skipped
	(reported by Jai Rangi)


2009-12-10 17:33:32  Andrei Dragus <adragus at opensips dot org> 
	* [6393] :

	Fixed unreachable code warning


2009-12-10 16:37:57  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6392] :

	- varios fixes to warnings (non-errors) reported by succ :
		- useless returns
		- return val in void functions

	  Credits go to Michal Bielicki @ Seventh Signal


2009-12-10 16:16:10  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6391] :

	- fixed warning reported by suncc about useless returns and retuning values in void functions
	- fixed bug in testing the success of the parse_to() function

	 Credits go to Michal Bielicki @ Seventh Signal


2009-12-10 16:09:58  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6390] :

	- varios fixes reported by succ :
		- useless returns
		- return val in void functions
	- fixed include path for unixodbc lib for OpenSolaris.

	  Credits go to Michal Bielicki @ Seventh Signal


2009-12-10 16:01:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6389] :

	- fixed bogus inline declaration - a function prototype cannot be inline -> reported by suncc
	  Credits go to Michal Bielicki @ Seventh Signal


2009-12-10 13:33:12  Iulia Bublea <iulia at opensips dot org> 
	* [6387] :

	Fifo reply path renamed from $path to $fifo_reply_path


2009-12-10 13:18:43  Iulia Bublea <iulia at opensips dot org> 
	* [6385] :

	Fifo reply file parameter renamed from $name to $fifo_reply_file



2009-12-09 18:33:12  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6382] :

	- fixed incomatibility between BLOB data type and string format for columns


2009-12-09 17:21:06  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6378] :

	- added check for db_url to be set (if db backend is used)


2009-12-09 16:26:48  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6377] :

	- added a few checks to aaa_radius
	- changed misleading LM_ERR into LM_DBG



2009-12-08 19:56:21  Anca Vamanu, <anca at opensips dot org> 
	* [6376] :

	- fixed typo (';' after if line)


2009-12-08 19:48:25  Anca Vamanu, <anca at opensips dot org> 
	* [6375] :

	- fixed typo (';' after if line), reported by Mika


2009-12-08 18:33:24  Anca Vamanu, <anca at opensips dot org> 
	* [6374] :

	- increased the length for contact column in active_watchers table to 128 (reported by Juha Heinanen)


2009-12-07 15:56:55  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6372] :

	- added check for db_url to be set


2009-12-04 13:24:27  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6371] :

	-fixed typo


2009-12-04 13:20:57  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6370] :

	- added check for SIP-AVP entry in radius dictionary


2009-12-04 09:51:05  Maxim Sobolev <sobomax at sippysoft dot com> 
	* [6369] :

	Fix error message: "bad forwardargument" -> "bad forward argument".



2009-12-03 10:45:00  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6368] :

	1. Replaced two deprecated functions of OSP Toolkit.
	2. Removed useless white char.


2009-12-01 10:57:32  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6367] :

	Added custom info support.


2009-11-30 10:53:14  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6361] :

	- fixed detection of static string (used for string IPs) when UDP is not used.
	  Closes bug #2904684. 


2009-11-30 09:50:37  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6360] :

	- added new line at the end of the file to get rid of compile warning.
	  Closes bug #2903765


2009-11-25 13:03:15  Anca Vamanu, <anca at opensips dot org> 
	* [6359] :

	- added check if NULL value returned by get_event function


2009-11-24 05:31:08  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6357] :

	Removed an unused variable.


2009-11-23 13:18:15  Andrei Dragus <adragus at opensips dot org> 
	* [6356] :

	Added codec_delete_except_re(),
		  feature request  2893576


2009-11-20 18:23:26  Anca Vamanu, <anca at opensips dot org> 
	* [6354] :

	- fixed not checking if variable is null on destroy


2009-11-20 18:06:10  Anca Vamanu, <anca at opensips dot org> 
	* [6352] :

	- fixed bug of resending 200OK reply (reported by Jeff Kronlage )


2009-11-20 17:07:47  Andrei Dragus <adragus at opensips dot org> 
	* [6351] :

	Fixed warning in nat_traversal


2009-11-19 18:54:07  Andrei Dragus <adragus at opensips dot org> 
	* [6350] :

	Modified nathelper so now it works wih multipart messages.


2009-11-19 16:53:38  Andrei Dragus <adragus at opensips dot org> 
	* [6349] :

	Made has_body check into multipart bodies.
	Added strip_body(mime), which looks into multipart.


2009-11-19 11:21:50  Anca Vamanu, <anca at opensips dot org> 
	* [6348] :

	- fixed bug when a FAKED_REPLY is received (reported by elmo at #opensips)


2009-11-19 11:07:38  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6346] :

	Added IP port support for inbound/outbound IP addresses.


2009-11-18 14:17:36  Anca Vamanu, <anca at opensips dot org> 
	* [6345] :

	- fixed small typing error in documentation


2009-11-18 12:47:35  Andrei Dragus <adragus at opensips dot org> 
	* [6344] :

	Added method to parse multipart bodies.



2009-11-18 04:45:20  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6343] :

	Fixed a running error message by adding null string check.


2009-11-16 18:08:59  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6342] :

	- applied patch from Авдиенко Михаил (fixes minor memleak)


2009-11-11 19:48:01  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6340] :

	- fixed bogus test for return code of avp_add()


2009-11-09 17:42:25  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6337] :

	- upgraded the code to be compatible with the latest openssl version. backward compatibility preserved.
	  Credits goto John Khvatov


2009-11-09 11:13:46  Anca Vamanu, <anca at opensips dot org> 
	* [6336] :

	- applied patch from Norm Brandinger (fixes bug #2893439)


2009-11-08 20:33:20  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6333] :

	specs and init updated
	- credits go to John Khvatov, the opensips maintainer on fedora.


2009-11-06 18:44:27  Anca Vamanu, <anca at opensips dot org> 
	* [6332] :

	- changed the way to search for the value of a certain SIP header


2009-11-06 13:14:42  Anca Vamanu, <anca at opensips dot org> 
	* [6331] :

	- fixed some isses when closing a call while in bridging state - send ACK for invite and switch to a new state for the scenario instance


2009-11-05 18:17:45  Anca Vamanu, <anca at opensips dot org> 
	* [6329] :

	- added support for handling refer at server ( extended the configuration possibility for the b2bua scenarios)
	- extended the number of supported methods to pass through the B2BUA
	- fixed bug when no custom headers were defined



2009-11-04 17:36:38  Andrei Dragus <adragus at opensips dot org> 
	* [6328] :

	New version of the usrloc module


2009-11-04 17:33:37  Andrei Dragus <adragus at opensips dot org> 
	* [6327] :

	Fixed warnings


2009-11-04 17:24:28  Andrei Dragus <adragus at opensips dot org> 
	* [6326] :

	New versions of map, used for usrloc module.


2009-11-04 16:49:11  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6323] :

	- fixed bug in calculating the the length of the table name.


2009-11-04 11:45:17  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6322] :

	- fixed crash when the all the weights are zero.
	  
	  Closes bug ID 2890649.
	  Reported by Urtho.


2009-11-04 10:55:35  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6319] :

	- on some systems (following the System V specs), there is different SIGCLD signal, while on POSIX like systems you have SIGCHLD.......The difference is that the SIGCLD must be rearmed, while SIGCHLD not. On System V  the SIGCHLD is simply defined as SIGCLD...so you may end up with some confusion....
	 -> if SIGCLD is defined do explicit re-arming of SIGCLD handler.



2009-11-03 17:28:03  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6317] :

	- automatically converts strings from the sets avps into ipaddr when needed
	- closes patch #2886450 submitted by Alex Massover



2009-11-02 16:08:02  Anca Vamanu, <anca at opensips dot org> 
	* [6315] :

	- fixed bug: not calling child_init for timer route process ( bug #2890657)


2009-10-30 13:16:29  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6314] :

	- Microtimer support in pvar.c for exact to the millisecond
	  Provides $Tsm variable to return the milliseconds

	  Closes patch #2887907.


2009-10-30 12:06:07  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6311] :

	 - fixed partial test for dst_uri string


2009-10-30 11:56:07  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6308] :

	- fixed bug in handling the AOR - According to RFC 3261, section 19.1.4, userInfo part of Sip URI should be treated as case sensitive.

	The case_sensitive param has now the default value to "yes" - to handle the AORs in a case sensitive way.

	Note that using a case insensitive setting in registrar will break other modules like msilo, pua_usrloc when you have upper cases in username part.



2009-10-30 11:44:19  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6305] :

	- fixed DB schema for dr_group tabel - group column is numerical, not string


2009-10-29 19:37:34  Iulia Bublea <iulia at opensips dot org> 
	* [6304] :

	Bug fixed - removed quotations for password.


2009-10-29 14:05:01  Anca Vamanu, <anca at opensips dot org> 
	* [6300] :

	- fixed bug: not sending Publish with expires 0 when usrloc contact was detected as expired
	- pua: ajusted the expiration checks in pua
	- pua: fixed inconsinstency in t_request parameter when sending Publish from timer process


2009-10-27 23:43:39  Ovidiu Sas <osas at voipembedded dot com>$ 
	* [6298] :

	rl_check does not check if forced_pipe is >=0, can coredump

	closes ID: 2887457
	credits goes to Pawel Pierscionek ( urtho2 )



2009-10-27 18:43:13  Anca Vamanu, <anca at opensips dot org> 
	* [6297] :

	- added some debug messages


2009-10-27 16:36:04  Anca Vamanu, <anca at opensips dot org> 
	* [6295] :

	- fix: take out the double quotes from display name before writing it in the xml document ( reported by elm0 at #opensips)


2009-10-27 15:26:28  Anca Vamanu, <anca at opensips dot org> 
	* [6293] :

	- fixed bug - rewriting the target uri with the display name if one was present (thanks to elmo at #opensips )


2009-10-27 10:56:59  Anca Vamanu, <anca at opensips dot org> 
	* [6291] :

	- fixed bug when arguments to script function are pseudovariables - reported by Daniel Cardoso Alves
	- new feature - possibility to define costum headers to be passed from the dialog of one side to the other (module parameter) (suggestion made by Saul Ibarra)


2009-10-26 15:45:09  Andrei Dragus <adragus at opensips dot org> 
	* [6290] :

	New version of F_MALLOC, prevents memory defragmentation,
		and is slightly faster.


2009-10-26 14:30:06  Andrei Dragus <adragus at opensips dot org> 
	* [6288] :

	Fixed a bug in textops.



2009-10-19 21:16:16  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6282] :

	- removed part of previous commit - verifier() called only from REQUEST route


2009-10-19 21:14:34  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6281] :

	- authservice() allowed from LOCAL and BRANCH routes


2009-10-19 15:21:18  Marc Leurent <lftsy at leurent dot eu> 
	* [6280] :

	* Mon Oct 19 2009 Marc Leurent <marc.leurent@vtx-telecom.ch>
	- Add missing config lines for packaging b2b modules
	- Add missing config lines for packaging peering module
	- Add missing dependencies for SNMPStats module



2009-10-19 07:09:32  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6278] :

	- fixed creation of B2BUA and DB_HTTP debian packages.

	  Reported by Alex Massover
	  Closes bug #2881206.


2009-10-19 06:58:55  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6276] :

	- increased version


2009-10-19 06:58:20  Bogdan-Andrei Iancu, <bogdan at opensips dot org> 
	* [6275] :

	- fixed missing usage of fetch_dlg_value() in LOCAL route.
	  Reported by Alex Massover
	  Closes patch #2881294


